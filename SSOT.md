# **0. é¡¹ç›®åç§° (Project Name)**

KubeCopilot

# **1. é¡¹ç›®æ„¿æ™¯ä¸å®šä½ (Vision & Positioning)**

- **æœ€ç»ˆæ„¿æ™¯ (Ultimate Vision)**: æˆä¸º SRE å’Œ DevOps å·¥ç¨‹å¸ˆçš„ AI åŸç”ŸåŸºç¡€è®¾æ–½å±‚ (AI-Native Infra Layer)ã€‚KubeCopilot é€šè¿‡ç»“æ„åŒ–æ™ºèƒ½ä¸è‡ªç„¶è¯­è¨€æ¥å£ï¼Œè®©å›¢é˜Ÿä»¥å·¥ç¨‹åŒ–æ–¹å¼æ²»ç†å¤æ‚çš„ Kubernetes ç³»ç»Ÿã€‚
- **æœ€ç»ˆå®šä½ (Positioning)**: ä¸€æ¬¾ AI å¢å¼ºçš„ Kubernetes æ™ºèƒ½é©¾é©¶èˆ± (AI-Powered DevOps Cockpit)ã€‚ä¼ ç»Ÿå¯è§†åŒ–å·¥å…·åªèƒ½å±•ç¤ºèµ„æºçŠ¶æ€ï¼Œè€Œ KubeCopilot èƒ½ç†è§£ã€è§£é‡Šå¹¶ç”Ÿæˆç»“æ„åŒ–ä¿®å¤è®¡åˆ’ï¼Œè®©è¿ç»´ä»â€œçœ‹å›¾åˆ†æâ€è½¬å˜ä¸ºâ€œå¯¹è¯é©±åŠ¨çš„å†³ç­–æ‰§è¡Œâ€ã€‚

# **2. æŒ‡å¯¼åŸåˆ™ / è®¾è®¡å“²å­¦ (Guiding Principles)**
- **AI Native (AI åŸç”Ÿ)**: AI ä¸æ˜¯é™„å±å“ï¼Œè€Œæ˜¯æ ¸å¿ƒäº¤äº’å’Œä»·å€¼çš„æ¥æºã€‚æ‰€æœ‰åŠŸèƒ½è®¾è®¡éƒ½å°†ä¼˜å…ˆè€ƒè™‘å¦‚ä½•åˆ©ç”¨ AI æå‡æ•ˆç‡å’Œé™ä½è®¤çŸ¥è´Ÿæ‹…ã€‚
- **å®‰å…¨é»˜è®¤ (Secure by Default)**: æ‰€æœ‰å†™æ“ä½œéƒ½å¿…é¡»ç»è¿‡ `OperationPlan` çš„ç»“æ„åŒ–å®¡æŸ¥ï¼ˆè¯¦è§ç¬¬ 8 èŠ‚ï¼‰ã€‚Kubeconfig ç­‰æ•æ„Ÿå‡­è¯çš„å¤„ç†æ²¿ç”¨æœ€é«˜å®‰å…¨æ ‡å‡†ï¼Œåç«¯æ˜¯å”¯ä¸€ä¸ K8s API é€šä¿¡çš„ç»„ä»¶ã€‚
- **ç»“æ„åŒ–ä¸å¯å®¡è®¡ (Structured & Auditable)**: AI çš„ä»»ä½•è¾“å‡ºï¼Œç‰¹åˆ«æ˜¯å†™æ“ä½œå»ºè®®ï¼Œéƒ½å¿…é¡»æ˜¯ç»“æ„åŒ–çš„ã€å¯è¢«æœºå™¨æ ¡éªŒçš„ (Schema-First)ã€‚æ‰€æœ‰å˜æ›´å¿…é¡»ç•™ä¸‹æ¸…æ™°ã€ä¸å¯ç¯¡æ”¹çš„å®¡è®¡æ—¥å¿—ã€‚
- **Prompt å¯é‡ç”¨ä¸å¯æ¼”åŒ– (Prompt as Infra)**: æ‰€æœ‰ Prompt å‡ä½œä¸ºå¯ç‰ˆæœ¬åŒ–çš„èµ„æºå­˜åœ¨ï¼Œæ”¯æŒè¿­ä»£ã€è¯„ä¼°ä¸ç°åº¦å‘å¸ƒï¼ˆè¯¦è§ç¬¬ 9 èŠ‚ï¼‰ã€‚Prompt ä¸ä»…æ˜¯æŒ‡ä»¤ï¼Œæ›´æ˜¯äº§å“è¡Œä¸ºçš„ä¸€éƒ¨åˆ†ã€‚
        Prompt Registry (prompts/manifest.json):Prompt 
        Pipelineï¼š
        æ‰€æœ‰ AI è¯·æ±‚éƒ½å¿…é¡»ç»è¿‡ï¼š
        1ï¸âƒ£ context builder â†’ 2ï¸âƒ£ prompt template loader â†’ 3ï¸âƒ£ LLM call â†’ 4ï¸âƒ£ schema validator â†’ 5ï¸âƒ£ risk annotatorã€‚
        è¿™ä½¿å¾— prompt è¡Œä¸ºå¯è¿½è¸ªã€å¯å›æ»šã€å¯è¯„ä¼°ã€‚

# **3. SRE æ ¸å¿ƒæ€æƒ³ä¸å®è·µ (SRE Core Philosophy & Practices)**

æœ¬ç« èŠ‚æ—¨åœ¨å°† Google SRE çš„æœ€ä½³å®è·µä½œä¸º KubeCopilot çš„é¡¶å±‚è®¾è®¡åŸåˆ™ï¼Œç¡®ä¿æˆ‘ä»¬çš„äº§å“ä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´æ˜¯ä¸€ä¸ªå¸®åŠ©å›¢é˜Ÿè·µè¡Œ SRE æ–‡åŒ–çš„æ™ºèƒ½ä¼™ä¼´ã€‚

- **åŸåˆ™ä¸€: æ¶ˆé™¤çç¢å·¥ä½œ (Eliminating Toil)**
    - **SRE å®šä¹‰**: çç¢å·¥ä½œæ˜¯æ‰‹åŠ¨ã€é‡å¤ã€å¯è‡ªåŠ¨åŒ–ã€æ— é•¿ä¹…ä»·å€¼çš„å·¥ä½œã€‚SRE çš„ç›®æ ‡æ˜¯å°†å…¶è‡ªåŠ¨åŒ–æˆ–å·¥ç¨‹åŒ–è§£å†³ã€‚
    - **KubeCopilot å®ç°**:
        - **AI è¯Šæ–­ (Phase 1)**: å°†æ‰‹åŠ¨çš„Â describeÂ ->Â logsÂ ->Â eventsÂ æ’é”™æµç¨‹è‡ªåŠ¨åŒ–ï¼Œç›´æ¥æä¾›ç»“æ„åŒ–æ´å¯Ÿï¼Œæ˜¯æ¶ˆé™¤â€œè¯Šæ–­ Toilâ€çš„æ ¸å¿ƒåŠŸèƒ½ã€‚
        - **YAML Copilot (Phase 3)**: é€šè¿‡ AI è¾…åŠ©ç”Ÿæˆã€è§£é‡Šå’Œå®¡æŸ¥ YAMLï¼Œå¤§å¹…å‡å°‘å·¥ç¨‹å¸ˆåœ¨é…ç½®ç¼–å†™ä¸Šçš„å¿ƒæ™ºè´Ÿæ‹…å’Œé‡å¤åŠ³åŠ¨ã€‚
        - **è‡ªç„¶è¯­è¨€äº¤äº’ (Phase 2)**: ç”¨ä¸€å¥è¯ä»£æ›¿å¤šæ¬¡ç‚¹å‡»å’Œå‘½ä»¤è¾“å…¥ï¼Œæ˜¯æ¶ˆé™¤â€œæ“ä½œ Toilâ€çš„ç»ˆæå½¢æ€ã€‚
- **åŸåˆ™äºŒ: æ‹¥æŠ±é£é™©ä¸ SLO é©±åŠ¨å†³ç­– (Embracing Risk & SLO-Driven Decisions)**
    - **SRE å®šä¹‰**: 100% å¯é æ€§ä¸ç°å®ã€‚é€šè¿‡å®šä¹‰æœåŠ¡ç­‰çº§ç›®æ ‡ (SLO) å’Œé”™è¯¯é¢„ç®— (Error Budgets) æ¥é‡åŒ–å¯æ¥å—çš„é£é™©ï¼Œå¹¶ä»¥æ­¤ä½œä¸ºå‘å¸ƒå’Œå˜æ›´å†³ç­–çš„æ•°æ®ä¾æ®ã€‚
    - **KubeCopilot å®ç°**:
        - **OperationPlan & é£é™©å¼•æ“ (Phase 2)**: è¿™æ˜¯ç®¡ç†å˜æ›´é£é™©çš„åŸºçŸ³ã€‚æ‰€æœ‰å˜æ›´è¢«è®¡åˆ’ã€åˆ†çº§å’Œå®¡æŸ¥ï¼Œå°†æ¨¡ç³Šçš„é£é™©å˜å¾—æ¸…æ™°å¯æ§ã€‚
        - **SLO/é”™è¯¯é¢„ç®—ç®¡ç† (Phase 4)**: åœ¨ KubeCopilot ä¸­å¼•å…¥ SLO å®šä¹‰å’Œé”™è¯¯é¢„ç®—è·Ÿè¸ªæ¨¡å—ã€‚AI åœ¨ç”ŸæˆÂ OperationPlanÂ æ—¶ï¼Œä¼šå°†**å½“å‰é”™è¯¯é¢„ç®—çš„æ¶ˆè€—æƒ…å†µ**ä½œä¸ºé£é™©è¯„ä¼°çš„å…³é”®è¾“å…¥ï¼Œä¾‹å¦‚ï¼šâ€œè­¦å‘Šï¼šæ­¤å˜æ›´å°†è€—å°½æœ¬æœˆå‰©ä½™é”™è¯¯é¢„ç®—ï¼Œå»ºè®®æ‹’ç»æˆ–åœ¨éé«˜å³°æœŸæ‰§è¡Œã€‚Risk Engine å°†åœ¨ Phase 4 ä¸ SLO æ¨¡å—æ·±åº¦é›†æˆï¼Œä½¿ OperationPlan çš„é£é™©è¯„ä¼°ä¸é”™è¯¯é¢„ç®—æŒ‚é’©ï¼Œå®ç°ã€Œæ•°æ®é©±åŠ¨çš„å¯é æ€§å†³ç­–ã€ã€‚
- **åŸåˆ™ä¸‰: å®‰å…¨æ¸è¿›çš„è‡ªåŠ¨åŒ– (Safe, Progressive Automation)**
    - **SRE å®šä¹‰**: è‡ªåŠ¨åŒ–åº”ä»è¾…åŠ©æ‰‹åŠ¨æ“ä½œæ¼”è¿›åˆ°åŠè‡ªåŠ¨å·¥ä½œæµï¼Œæœ€ç»ˆæ‰åˆ°å…¨è‡ªåŠ¨ç³»ç»Ÿã€‚ä¿¡ä»»æ˜¯é€æ­¥å»ºç«‹çš„ã€‚
    - **KubeCopilot å®ç°**:
        - **æ¸…æ™°çš„æ¼”è¿›è·¯çº¿**: æˆ‘ä»¬çš„è·¯çº¿å›¾éµå¾ªäº†è¿™ä¸€åŸåˆ™ï¼šPhase 1Â (AI è¾…åŠ©æ´å¯Ÿ) ->Â Phase 2Â (äººæœºç¡®è®¤çš„å·¥ä½œæµ) ->Â Phase 4Â (æ¢ç´¢åŠè‡ªåŠ¨ä¿®å¤)ï¼Œç¡®ä¿äº†è‡ªåŠ¨åŒ–çš„å®‰å…¨æ€§å’Œå¯ä¿¡åº¦ã€‚
        - **åŒé‡æ ¡éªŒ**: ä»»ä½•å†™æ“ä½œéƒ½éœ€è¦äººç±»çš„æœ€ç»ˆç¡®è®¤ï¼Œè¿™æ˜¯åœ¨è‡ªåŠ¨åŒ–å’Œå®‰å…¨æ€§ä¹‹é—´æ‰¾åˆ°çš„æœ€ä½³å¹³è¡¡ç‚¹ã€‚
- **åŸåˆ™å››: æ— æŒ‡è´£äº‹åå¤ç›˜ (Blameless Postmortems)**
    - **SRE å®šä¹‰**: ä»æ•…éšœä¸­å­¦ä¹ æ˜¯æå‡ç³»ç»Ÿå¯é æ€§çš„å…³é”®ã€‚å¤ç›˜çš„ç›®çš„æ˜¯æ‰¾åˆ°ç³»ç»Ÿæ€§é—®é¢˜å¹¶æ”¹è¿›ï¼Œè€Œéè¿½ç©¶ä¸ªäººè´£ä»»ã€‚
    - **KubeCopilot å®ç°**:
        - **AI è¾…åŠ©äº‹åå¤ç›˜ (Phase 4)**: å‘ç”Ÿäº‹ä»¶åï¼ŒAI èƒ½ä¸€é”®æ‹‰å– K8s Eventsã€OperationPlanÂ å®¡è®¡æ—¥å¿—ã€Prometheus æŒ‡æ ‡å¿«ç…§ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä»½åŒ…å«**æ—¶é—´çº¿ã€å½±å“èŒƒå›´ã€åˆæ­¥æ ¹å› åˆ†æã€æ”¹è¿›å»ºè®®**çš„å¤ç›˜æŠ¥å‘Šè‰ç¨¿ï¼Œæå¤§åœ°æå‡å¤ç›˜æ•ˆç‡å’Œè´¨é‡ã€‚æ‰€æœ‰æ•…éšœäº‹ä»¶çš„å¤ç›˜æŠ¥å‘Šå°†å¼•ç”¨ AI è§£é‡Šé“¾ (XAI Context)ï¼Œå¯è¿½è¸ª Prompt ç‰ˆæœ¬ã€æ¨¡å‹ç‰ˆæœ¬ã€è¾“å…¥æ¥æºä¸ä¿¡å¿ƒæ°´å¹³ã€‚è¿™æ„æˆäº† KubeCopilot çš„ã€ŒExplainability Layerã€ã€‚
- **åŸåˆ™äº”: æ¸è¿›å¼éƒ¨ç½² (Progressive Rollouts)**
    - **SRE å®šä¹‰**: ä½¿ç”¨é‡‘ä¸é›€å‘å¸ƒã€è“ç»¿éƒ¨ç½²ç­‰ç­–ç•¥æ¥æ§åˆ¶å˜æ›´çš„â€œçˆ†ç‚¸åŠå¾„â€ï¼Œæ˜¯ä¿éšœæœåŠ¡ç¨³å®šæ€§çš„é‡è¦æ‰‹æ®µã€‚
    - **KubeCopilot å®ç°**:
        - **æ¸è¿›å¼å‘å¸ƒè®¡åˆ’ç”Ÿæˆ (Phase 4)**: ç”¨æˆ·å¯é€šè¿‡è‡ªç„¶è¯­è¨€è¡¨è¾¾â€œå°†æœåŠ¡ X é‡‘ä¸é›€å‘å¸ƒ 10% æµé‡â€ï¼ŒAI å°†è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåŒ…å«**éƒ¨ç½²æ–°ç‰ˆã€è°ƒæ•´æµé‡ã€ç›‘æ§ SLIã€è‡ªåŠ¨å›æ»š/æ¨è¿›**ç­‰æ­¥éª¤çš„å¤šæ­¥Â OperationPlanï¼Œå°†å¤æ‚çš„å‘å¸ƒæµç¨‹æ ‡å‡†åŒ–ã€å®‰å…¨åŒ–ã€‚



# **4. å¼€å‘å·¥ä½œæµ (Development Workflow)**

### **a. ç¯å¢ƒç®¡ç† (å¼€å‘ vs. ç”Ÿäº§)**

- **æ–¹æ¡ˆ**: æˆ‘ä»¬å°†ä¸¥æ ¼ä½¿ç”¨**ç¯å¢ƒå˜é‡**æ¥ç®¡ç†ä¸åŒç¯å¢ƒçš„é…ç½®ã€‚
- **å®ç°**: Next.js å†…ç½®äº†å¼ºå¤§çš„ç¯å¢ƒå˜é‡æ”¯æŒã€‚
    - .env: å­˜å‚¨æ‰€æœ‰ç¯å¢ƒå…±äº«çš„å˜é‡ï¼ˆä¼šè¢«æäº¤åˆ° gitï¼‰ã€‚
    - .env.local: å­˜å‚¨æœ¬åœ°å¼€å‘çš„æ•æ„Ÿä¿¡æ¯æˆ–ä¸ªæ€§åŒ–é…ç½®ï¼ˆ**ä¸ä¼š**è¢«æäº¤åˆ° gitï¼‰ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œè¦†ç›– API åœ°å€ç­‰ã€‚
    - .env.production: å­˜å‚¨ç”Ÿäº§ç¯å¢ƒçš„ç‰¹å®šé…ç½®ã€‚
    - next.config.js: ç”¨äºç®¡ç†æ„å»ºæ—¶çš„ç¯å¢ƒå˜é‡ã€‚
- **åŸåˆ™**: ä»»ä½•å¯èƒ½åœ¨ä¸åŒç¯å¢ƒé—´å˜åŒ–çš„é…ç½®ï¼ˆå¦‚ API è¶…æ—¶ã€æ—¥å¿—çº§åˆ«ç­‰ï¼‰éƒ½å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç åœ¨ä»£ç é‡Œã€‚

> **ç¯å¢ƒé…ç½®é€Ÿè§ˆ**

| åœºæ™¯ | ä¸»è¦æ–‡ä»¶/å˜é‡ | è¯´æ˜ | è´Ÿè´£äºº |
| --- | --- | --- | --- |
| æœ¬åœ°å¼€å‘ | `.env.local`ã€`NEXT_PUBLIC_*` | ä»…åœ¨å¼€å‘æœºåŠ è½½ï¼ŒåŒ…å«å®éªŒæ€§ APIã€è°ƒè¯•å¼€å…³ | å¼€å‘è€… |
| å…±äº«é»˜è®¤ | `.env` | å¯æäº¤åˆ°ä»“åº“çš„å…¬å…±é…ç½®ï¼Œå¦‚é»˜è®¤è¶…æ—¶ã€UI Flag | æ¶æ„ç»„ |
| ç”Ÿäº§éƒ¨ç½² | `.env.production`ã€å¹³å° Secret Manager | ä¸¥ç¦æäº¤åˆ°ä»“åº“ï¼›ç”±è¿ç»´æ³¨å…¥çœŸå®å‡­è¯ä¸é™æµå‚æ•° | SRE/å¹³å°å›¢é˜Ÿ |
| æ„å»ºæ—¶å¸¸é‡ | `next.config.js` | å¯¹å¤–å…¬å¼€çš„é™æ€å˜é‡ï¼ˆå¦‚ç‰ˆæœ¬å·ã€å…¬å¼€æ–‡æ¡ˆï¼‰ | å‰ç«¯å›¢é˜Ÿ |
| è¿è¡Œæ—¶å¯†é’¥ | Kubernetes Secret / Vault | LLM Keyã€æ•°æ®åº“è¿æ¥ä¸²ï¼Œéƒ¨ç½²åé€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥ | å¹³å°å›¢é˜Ÿ |

> **æµç¨‹**ï¼šæ–°å¢é…ç½® â†’ åœ¨ `.env.example` è®°å½•é”®å â†’ è¯´æ˜æ˜¯å¦å¿…å¡«åŠé»˜è®¤å€¼ â†’ æ›´æ–°éƒ¨ç½²æ–‡æ¡£ï¼Œç¡®ä¿å¼€å‘/ç”Ÿäº§åŒæ­¥ã€‚

### **b. GitHub åˆ†æ”¯ç®¡ç†**

- **æ–¹æ¡ˆ**: é‡‡ç”¨Â **GitHub Flow**ï¼Œè¿™æ˜¯ä¸€ä¸ªè½»é‡ã€é«˜æ•ˆã€é€‚åˆæˆ‘ä»¬é¡¹ç›®è§„æ¨¡çš„åˆ†æ”¯æ¨¡å‹ã€‚
- **Commit Message è§„èŒƒ**:
    - **æ ¼å¼**:Â <type>(<scope>): <subject>ï¼Œä¾‹å¦‚ï¼š
        - feat(api): implement operation plan generation endpoint
        - fix(ui): correct pod status badge color
        - docs(ssot): refine sre principles section
        - test(husky)ï¼šå¢åŠ æµ‹è¯•
    - **ç†ç”±**: è§„èŒƒåŒ–çš„ Commit Message èƒ½æå¤§åœ°æé«˜ Git Log çš„å¯è¯»æ€§ï¼Œä¾¿äºå¿«é€Ÿç†è§£æ¯æ¬¡æäº¤çš„å†…å®¹ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒå¯ä»¥ä¸ºè‡ªåŠ¨åŒ–å·¥å…·ï¼ˆå¦‚Â semantic-releaseï¼‰æ‰€ç”¨ï¼Œå®ç°**è‡ªåŠ¨åŒ–ç”Ÿæˆ CHANGELOG å’Œç‰ˆæœ¬å·ç®¡ç†**ï¼Œè¿™æ˜¯ DevOps æœ€ä½³å®è·µçš„ä¸€éƒ¨åˆ†ã€‚
- **è§„åˆ™**:
    1. **mainÂ åˆ†æ”¯**: è¿™æ˜¯é¡¹ç›®çš„ä¸»åˆ†æ”¯ï¼Œæ°¸è¿œå¤„äº**å¯éƒ¨ç½²**çŠ¶æ€ã€‚ä¸å…è®¸ç›´æ¥ pushï¼Œæ‰€æœ‰åˆå¹¶å¿…é¡»é€šè¿‡ Pull Requestã€‚
    2. **ç‰¹æ€§åˆ†æ”¯ (feat Branches)**:
        - ä»»ä½•æ–°çš„åŠŸèƒ½æˆ–ä¿®å¤ï¼Œéƒ½å¿…é¡»ä»Â mainÂ åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„ç‰¹æ€§åˆ†æ”¯ã€‚
        - åˆ†æ”¯å‘½åè§„èŒƒ:Â feat/login-page,Â fix/pod-list-bug,Â refactor/api-clientã€‚
    3. **æ‹‰å–è¯·æ±‚ (Pull Request - PR)**:
        - å½“ç‰¹æ€§å¼€å‘å®Œæˆåï¼Œå‘Â mainÂ åˆ†æ”¯å‘èµ·ä¸€ä¸ª PRã€‚
        - å³ä½¿æ˜¯ç‹¬ç«‹å¼€å‘ï¼ŒPR ä¹Ÿæ˜¯ä¸€ä¸ªå¼ºåˆ¶æ€§çš„æ­¥éª¤ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ è¿›è¡Œ**ä»£ç è‡ªå®¡ (Self-Review)**ï¼Œç¡®ä¿ä»£ç è´¨é‡ï¼Œå¹¶ä¸ºæœªæ¥å¯èƒ½çš„è‡ªåŠ¨åŒ–æ£€æŸ¥ï¼ˆCI/CDï¼‰ç•™ä¸‹å…¥å£ã€‚
- **åˆ†æ”¯ç­–ç•¥ (GitHub Flow)**:
    1. `main` åˆ†æ”¯æ˜¯ç”Ÿäº§åˆ†æ”¯ï¼Œæ°¸è¿œä¿æŒå¯éƒ¨ç½²çŠ¶æ€ã€‚
        git checkout main
        git pull origin main
    2. ä» `main` æ‹‰å–æ–°çš„ `feat/` æˆ– `fix/` åˆ†æ”¯è¿›è¡Œå¼€å‘ã€‚
        git checkout -b feat/***
        git add .
        git commit -m "Add *** feat"
        git push -u origin feat/XXX(git push --set-upstream origin feat/XXX)
    3. å¼€å‘å®Œæˆåï¼Œå‘ `main` åˆ†æ”¯å‘èµ· Pull Request (PR)ã€‚
    4. PR åˆå¹¶ã€‚
        git checkout main
        git pull origin main
    5. åˆ é™¤å·²åˆå¹¶çš„åŠŸèƒ½åˆ†æ”¯ã€‚
        git branch -d feat/XXX
        git push origin --delete feat/XXX

### **c. å¼€å‘ç¯å¢ƒæŒ‡å— (Development Environment Guide)**

**æ ¸å¿ƒåŸåˆ™**: æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒå¿…é¡»æœ€å¤§é™åº¦åœ°æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒï¼ˆLinuxï¼‰ï¼Œä»¥éµå¾ªâ€œå¼€å‘-ç”Ÿäº§ç¯å¢ƒå¯¹ç­‰â€çš„ SRE æœ€ä½³å®è·µã€‚

- **æ“ä½œç³»ç»Ÿ**: **Windows 11/10 + WSL2 (Ubuntu)**ã€‚æ‰€æœ‰å¼€å‘æ´»åŠ¨ï¼ŒåŒ…æ‹¬ç¼–ç ã€è¿è¡Œå‘½ä»¤ã€ç‰ˆæœ¬æ§åˆ¶ï¼Œéƒ½å¿…é¡»åœ¨ WSL2 çš„ Ubuntu ç¯å¢ƒä¸­è¿›è¡Œã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§ã€æœ€å¤§åŒ–æ€§èƒ½å’Œå·¥å…·é“¾å…¼å®¹æ€§ã€‚
- **ç¼–è¾‘å™¨/IDE**: æ¨èä½¿ç”¨æ”¯æŒè¿œç¨‹å¼€å‘çš„ç¼–è¾‘å™¨ï¼Œå¦‚ **VS Code (with WSL Extension)** æˆ– **Zed**ã€‚é€šè¿‡åœ¨ WSL2 ç»ˆç«¯çš„é¡¹ç›®ç›®å½•ä¸­è¿è¡Œ `code .` æˆ– `zed .` æ¥å¯åŠ¨ï¼Œä»¥è·å¾—æœ€ä½³çš„é›†æˆä½“éªŒã€‚
- **æ ¸å¿ƒå·¥å…·é“¾**: **æ‰€æœ‰å¼€å‘å·¥å…·é“¾ (Node.js, npm, Docker CLI) éƒ½å¿…é¡»ç‹¬ç«‹å®‰è£…åœ¨ WSL2 å†…éƒ¨**ï¼Œæ¨èä½¿ç”¨ `nvm` ç®¡ç† Node.js ç‰ˆæœ¬ã€‚ä¸¥ç¦æ··ç”¨æˆ–ä¾èµ– Windows ä¸­å®‰è£…çš„å·¥å…·é“¾ï¼Œä»¥é¿å…â€œç¯å¢ƒæ±¡æŸ“â€å¯¼è‡´çš„è·¯å¾„å’Œå…¼å®¹æ€§é—®é¢˜ã€‚
- **æœ¬åœ° K8s é›†ç¾¤**: ä½¿ç”¨ **k3d** åœ¨ WSL2 å†…éƒ¨çš„ Docker ä¸­åˆ›å»ºå’Œç®¡ç†è½»é‡çº§ K3s é›†ç¾¤ã€‚è¿™æä¾›äº†å¿«é€Ÿã€éš”ç¦»ã€å¯å¤ç°çš„æµ‹è¯•ç¯å¢ƒï¼Œå®Œç¾å¥‘åˆ CI/CD å’Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„éœ€æ±‚ã€‚
        - åˆ›å»ºå¼€å‘é›†ç¾¤: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªä¸“ç”¨äº KubeCopilot å¼€å‘çš„é›†ç¾¤ï¼šk3d cluster create kubecopilot-dev
        - è·å– Kubeconfig: è¦è·å–ç”¨äºè¿æ¥çš„ Kubeconfig å†…å®¹ï¼Œè¯·è¿è¡Œï¼šk3d kubeconfig get kubecopilot-dev
        - æ¸…ç†é›†ç¾¤: å½“ä¸å†éœ€è¦æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤é›†ç¾¤ä»¥é‡Šæ”¾èµ„æºï¼šk3d cluster delete kubecopilot-dev
- **ç¯å¢ƒä¸€è‡´æ€§åŸåˆ™ (Principle of Environmental Congruence)**: å¼€å‘ç¯å¢ƒå¿…é¡»ä¸ç›®æ ‡ç”Ÿäº§ç¯å¢ƒï¼ˆLinuxï¼‰ä¿æŒé«˜åº¦ä¸€è‡´ã€‚æˆ‘ä»¬åšæŒåœ¨ WSL2 å†…éƒ¨è¿›è¡Œæ‰€æœ‰å¼€å‘ï¼Œä½¿ç”¨åŸç”Ÿçš„ Linux å·¥å…·é“¾ã€‚è¿™ä¸€åŸåˆ™æ—¨åœ¨ä»æ ¹æºä¸Šæ¶ˆé™¤â€œåœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘â€çš„é—®é¢˜ï¼Œç¡®ä¿æˆ‘ä»¬æ„å»ºçš„è½¯ä»¶å¥å£®ã€å¯é ï¼Œå¹¶ç¬¦åˆ DevOps æœ€ä½³å®è·µã€‚

### **d. æµ‹è¯•ç­–ç•¥ (Testing Strategy)**

æˆ‘ä»¬é‡‡çº³â€œæµ‹è¯•é‡‘å­—å¡”â€æ¨¡å‹ï¼Œåˆ†é˜¶æ®µå¼•å…¥æµ‹è¯•ã€‚

- **Phase 1 (å½“å‰é˜¶æ®µ)**: **ä¸å¼•å…¥æµ‹è¯•**ã€‚æ­¤é˜¶æ®µä¸»è¦ä¸ºç¯å¢ƒæ­å»ºå’ŒåŸºç¡€ UI å±•ç¤ºï¼Œä¸šåŠ¡é€»è¾‘æå°‘ã€‚é…ç½® `pre-commit` é’©å­è¿è¡Œ `ESLint` å’Œ `Prettier` æ¥ä¿è¯é™æ€ä»£ç è´¨é‡ã€‚
- **Phase 2 (å¼•å…¥åç«¯é€»è¾‘æ—¶)**: **å¼•å…¥å•å…ƒ/é›†æˆæµ‹è¯•**ã€‚å½“å¼€å§‹å¼€å‘ `AI ç¼–æ’å™¨`ã€`é£é™©å¼•æ“` å’Œ `OperationPlan` ç”Ÿæˆç­‰æ ¸å¿ƒåç«¯é€»è¾‘æ—¶ï¼Œæˆ‘ä»¬å°†å¼•å…¥ `Jest` (æˆ– `Vitest`) ä½œä¸ºæµ‹è¯•æ¡†æ¶ã€‚æˆ‘ä»¬å°†ä¸ºè¿™äº›æ—  UI çš„ã€å¤„ç†å…³é”®æ•°æ®å’Œé€»è¾‘çš„æ¨¡å—ç¼–å†™è¯¦å°½çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œç¡®ä¿å…¶è¡Œä¸ºçš„æ­£ç¡®æ€§å’Œç¨³å®šæ€§ã€‚
- **Phase 3 & Beyond (å¼•å…¥å¤æ‚ UI äº¤äº’æ—¶)**: **å¼•å…¥å‰ç«¯æµ‹è¯•**ã€‚å½“å¼€å‘å¦‚ `YAML Copilot`ã€`SLO å®šä¹‰` ç­‰åŒ…å«å¤æ‚çŠ¶æ€å’Œç”¨æˆ·äº¤äº’çš„ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å°†å¼•å…¥ `React Testing Library` å’Œ `Jest-DOM` æ¥è¿›è¡Œç»„ä»¶çº§åˆ«çš„å•å…ƒå’Œé›†æˆæµ‹è¯•ï¼Œç¡®ä¿å‰ç«¯è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚
- **æœªæ¥ (CI/CD æµæ°´çº¿æˆç†Ÿæ—¶)**: **å¼•å…¥ç«¯åˆ°ç«¯ (E2E) æµ‹è¯•**ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ `Playwright` æˆ– `Cypress`ï¼Œåœ¨ CI æµç¨‹ä¸­é’ˆå¯¹ k3d åˆ›å»ºçš„ä¸´æ—¶é›†ç¾¤ï¼Œè¿è¡Œå…³é”®ç”¨æˆ·æµç¨‹çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå¦‚ï¼šè¿æ¥é›†ç¾¤ -> é€šè¿‡è‡ªç„¶è¯­è¨€ä¼¸ç¼© Deployment -> éªŒè¯ç»“æœï¼‰ã€‚

### **f. å‡­è¯ä¸å®‰å…¨æµç¨‹ (Credential Handling Flow)**

| æ­¥éª¤ | æè¿° | å·¥å…·/å­˜å‚¨ | è´£ä»»äºº |
| --- | --- | --- | --- |
| 1. å‰ç«¯æäº¤ | `/connect` é¡µé¢é€šè¿‡ HTTPS å°†åŸå§‹ Kubeconfig POST è‡³ `/api/k8s/connect`ï¼Œå‰ç«¯ä¸æŒä¹…åŒ– | Next.js App Router | å‰ç«¯ |
| 2. æœåŠ¡ç«¯æ ¡éªŒ | `lib/k8s/connection.ts` æ ¡éªŒæƒé™è¾¹ç•Œï¼Œæ‹’ç»è¶Šæƒ ClusterRole | @kubernetes/client-node | å¹³å°å›¢é˜Ÿ |
| 3. ä¼šè¯å°è£… | é€šè¿‡ `iron-session` åŠ å¯†å­˜å‚¨ï¼ˆçŸ­æœŸï¼‰æˆ–å¤–éƒ¨ Secret Storeï¼ˆä¸­é•¿æœŸï¼‰ | iron-session / Redis / Vault | å¹³å°å›¢é˜Ÿ |
| 4. è¯·æ±‚ä»£ç† | æ‰€æœ‰ `/api/k8s/*` è°ƒç”¨ä»…ä»å®‰å…¨ä»£ç†è·å–å‡­è¯ï¼Œå‰ç«¯ç»ä¸ç›´è¿ K8s API | Secure Proxy | åç«¯ |
| 5. å¤±æ•ˆæ¸…ç† | ä¼šè¯åˆ°æœŸæˆ–ç”¨æˆ·æ–­å¼€æ—¶é”€æ¯ç¼“å­˜ï¼Œå¿…è¦æ—¶åŠé”€ä¸´æ—¶å‡­è¯ | Middlewareã€åå°ä»»åŠ¡ | å¹³å°å›¢é˜Ÿ |

> **æ³¨æ„**ï¼šæ‰€æœ‰å†™æ“ä½œä»éœ€é€šè¿‡ `OperationPlan` å®¡æ‰¹ï¼ˆç¬¬ 8 èŠ‚ï¼‰ï¼Œç¡®ä¿å‡­è¯ä¸å˜æ›´è·¯å¾„å‡å¤„äºå—æ§çŠ¶æ€ã€‚

**æµ‹è¯•æŠ€æœ¯æ ˆ**:
- **æµ‹è¯•è¿è¡Œå™¨**: `Jest` æˆ– `Vitest`
- **å‰ç«¯ç»„ä»¶æµ‹è¯•**: `React Testing Library`
- **ç«¯åˆ°ç«¯æµ‹è¯•**: `Playwright` (æ¨è) æˆ– `Cypress`

### **g. å‰ç«¯ UI è¿­ä»£ç­–ç•¥ (Frontend UI Iteration Strategy)**

- **æ ¸å¿ƒåŸåˆ™**: ä¸ºè·µè¡Œâ€œå¼€å‘è€…ä½“éªŒè‡³ä¸Š (DX First)â€å¹¶å…è®¸æœªæ¥å¯¹ UI è¿›è¡ŒæŒç»­æ‰“ç£¨ï¼Œæˆ‘ä»¬é‡‡ç”¨**â€œé€»è¾‘ä¸è§†å›¾åˆ†ç¦»â€**çš„ç»„ä»¶è®¾è®¡ç­–ç•¥ã€‚
- **å®æ–½æ–¹æ¡ˆ**:
    - **é€»è¾‘å±‚ (Logic Layer)**: æŒ‡çš„æ˜¯ç»„ä»¶å†…çš„ React Hooks (`useState`, `useEffect`), çŠ¶æ€ç®¡ç† (`Zustand`) ä»¥åŠäº‹ä»¶å¤„ç†å‡½æ•° (`handleConnect` ç­‰)ã€‚è¿™æ˜¯ç»„ä»¶çš„â€œå¤§è„‘â€ï¼Œè´Ÿè´£çŠ¶æ€ç®¡ç†å’Œä¸šåŠ¡æµç¨‹ï¼Œåº”ä¿æŒç¨³å®šã€‚
    - **è§†å›¾å±‚ (View Layer)**: æŒ‡çš„æ˜¯ç»„ä»¶ `return()` è¯­å¥ä¸­çš„ JSX ç»“æ„ï¼Œç”± `shadcn/ui` æˆ–å…¶ä»– UI å…ƒç´ æ„æˆã€‚è¿™æ˜¯ç»„ä»¶çš„â€œçš®è‚¤â€ï¼Œå¯ä»¥è¢«çµæ´»æ›¿æ¢å’Œç¾åŒ–ã€‚
- **è¿­ä»£å·¥ä½œæµ**:
    1.  **è®¾è®¡**: ä½¿ç”¨ Figma, Stitch ç­‰å·¥å…·è®¾è®¡æ–°çš„ UI ç•Œé¢ã€‚
    2.  **å¼€å‘**: ç¼–å†™æˆ–ç”Ÿæˆæ–°çš„è§†å›¾å±‚ (JSX) ä»£ç ã€‚
    3.  **æ›¿æ¢**: åœ¨å¯¹åº”çš„ç»„ä»¶æ–‡ä»¶ä¸­ï¼Œ**ä»…æ›¿æ¢ `return()` å†…çš„ JSX éƒ¨åˆ†**ï¼Œä¿ç•™é¡¶éƒ¨çš„é€»è¾‘å±‚ä»£ç ã€‚
    4.  **é‡ç»‘**: å°†é€»è¾‘å±‚ä¸­çš„çŠ¶æ€å’Œäº‹ä»¶å¤„ç†å™¨ï¼ˆå¦‚ `value`, `onChange`, `onClick`ï¼‰é‡æ–°ç»‘å®šåˆ°æ–°çš„ JSX å…ƒç´ ä¸Šã€‚
- **ä¼˜åŠ¿**: æ­¤ç­–ç•¥ç¡®ä¿äº†æˆ‘ä»¬å¯ä»¥ä½é£é™©ã€é«˜æ•ˆç‡åœ°å¯¹äº§å“ UI è¿›è¡Œè¿­ä»£å’Œä¼˜åŒ–ï¼Œè€Œæ— éœ€é‡å†™å·²ç»ç¨³å®šçš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚

# **5. æŠ€æœ¯æ ˆ (Tech Stack)**

- **æ ¸å¿ƒæ¡†æ¶**:Â Next.js 14Â (App Router),Â TypeScript
    - *ç†ç”±*: å…¨æ ˆèƒ½åŠ›ï¼Œç»Ÿä¸€å‰åç«¯å¼€å‘ä½“éªŒï¼Œå®Œç¾å¥‘åˆæˆ‘ä»¬â€œå‰ç«¯ UI + åç«¯å®‰å…¨ä»£ç†/AI ç¼–æ’å™¨â€çš„æ¶æ„ã€‚
- **UI æ¡†æ¶**:Â Tailwind CSS,Â shadcn/ui, Magic UI
    - *ç†ç”±*: é«˜åº¦å¯å®šåˆ¶çš„åŸå­åŒ– CSSï¼Œç»“åˆé¢„åˆ¶ã€ç¬¦åˆæ— éšœç¢æ ‡å‡†çš„ä¼˜ç¾ç»„ä»¶ï¼Œèƒ½æå¤§åœ°æå‡å¼€å‘æ•ˆç‡å’Œ UI è´¨é‡ã€‚
- **çŠ¶æ€ç®¡ç†**:Â Zustand
    - *ç†ç”±*: è½»é‡ã€ç®€æ´ã€æ— æ¨¡æ¿ä»£ç ã€‚å¯¹äºéœ€è¦è·¨ç»„ä»¶å…±äº«çš„çŠ¶æ€ï¼ˆå¦‚å½“å‰é€‰æ‹©çš„ Namespaceã€é›†ç¾¤è¿æ¥çŠ¶æ€ï¼‰ï¼Œå®ƒæ˜¯æœ€ç†æƒ³çš„é€‰æ‹©ã€‚
- **åç«¯æ ¸å¿ƒ**:
    - **K8s å®¢æˆ·ç«¯**:Â @kubernetes/client-node
        - *ç†ç”±*: CNCF å®˜æ–¹ Node.js å®¢æˆ·ç«¯ï¼Œæ˜¯ä¸ Kubernetes API Server é€šä¿¡çš„æ ‡å‡†å’Œæœ€å¯é çš„æ–¹å¼ã€‚
    - **æ•°æ®åº“ ORM**:Â Prisma
        - *ç†ç”±*: æä¾›ç±»å‹å®‰å…¨çš„æ•°æ®åº“è®¿é—®ï¼Œç®€åŒ–æ•°æ®åº“è¿ç§»å’ŒæŸ¥è¯¢ã€‚èƒ½ä¸Â PostgreSQLÂ (ç”Ÿäº§) å’ŒÂ SQLiteÂ (æœ¬åœ°å¼€å‘) æ— ç¼åä½œï¼Œæ˜¯Â Audit StoreÂ å’ŒÂ OperationPlanÂ æŒä¹…åŒ–çš„æœ€ä½³é€‰æ‹©ã€‚
    - **æ•°æ®åº“**:Â PostgreSQLÂ (ç”Ÿäº§æ¨è),Â SQLiteÂ (æœ¬åœ°å¼€å‘)
        - *ç†ç”±*:Â PostgreSQLÂ åŠŸèƒ½å¼ºå¤§ã€ç¨³å®šå¯é ï¼›SQLiteÂ è½»é‡é›¶é…ç½®ï¼Œéå¸¸é€‚åˆæœ¬åœ°å¿«é€Ÿå¯åŠ¨å’Œæµ‹è¯•ã€‚
- **AI ä¸æ•°æ®æ ¡éªŒ**:
    - **LLM å®¢æˆ·ç«¯**:Â openaiÂ æˆ–Â @google/generative-ai
        - *ç†ç”±*: ç”¨äºä¸å¤§è¯­è¨€æ¨¡å‹ APIï¼ˆå¦‚ OpenAI GPT ç³»åˆ—æˆ– Google Gemini ç³»åˆ—ï¼‰è¿›è¡Œäº¤äº’ã€‚
        - **AI å®¢æˆ·ç«¯æŠ½è±¡å±‚**: æˆ‘ä»¬å°† AI å®¢æˆ·ç«¯å®ç°ä¸ºä¸€ä¸ªå¯æ’æ‹”çš„æ¨¡å—ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šä½¿ç”¨çš„æ¨¡å‹ï¼ˆå¦‚ OpenAIã€Google Geminiã€Ollama ç­‰ï¼‰ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ä¸æ”¹å˜æ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œè½»æ¾åˆ‡æ¢ä¸åŒçš„ AI æ¨¡å‹ã€‚
    - **Schema æ ¡éªŒ**:Â Zod
        - *ç†ç”±*:Â **AI Native æ¶æ„çš„åŸºçŸ³**ã€‚ç”¨äºåœ¨åç«¯ä¸¥æ ¼æ ¡éªŒ LLM è¿”å›çš„ JSON æ˜¯å¦ç¬¦åˆæˆ‘ä»¬å®šä¹‰çš„Â OperationPlanÂ ç­‰ Schemaï¼Œç¡®ä¿ AI è¾“å‡ºçš„å¯é æ€§å’Œå®‰å…¨æ€§ã€‚
- **ç¼–è¾‘å™¨ä¸å¯è§†åŒ–**:
    - **YAML ç¼–è¾‘å™¨**:Â @monaco-editor/react
        - *ç†ç”±*: VS Code çš„æ ¸å¿ƒç¼–è¾‘å™¨ï¼Œæä¾›ä¸€æµçš„ YAML ç¼–è¾‘ã€è¯­æ³•é«˜äº®å’Œæ ¡éªŒä½“éªŒï¼Œæ˜¯Â YAML CopilotÂ åŠŸèƒ½çš„ä¸äºŒä¹‹é€‰ã€‚
    - **æ•°æ®å›¾è¡¨**:Â Recharts
        - *ç†ç”±*: ç®€å•ã€ç»„ä»¶åŒ–çš„å›¾è¡¨åº“ï¼Œéå¸¸é€‚åˆæœªæ¥é›†æˆ Prometheus æŒ‡æ ‡ï¼Œå±•ç¤º CPU/å†…å­˜ç­‰ç›‘æ§å›¾è¡¨ã€‚
- **ä»£ç è´¨é‡**:Â ESLint,Â Prettier,Â Husky
    - *ç†ç”±*: ä¿è¯ä»£ç é£æ ¼ç»Ÿä¸€ã€è´¨é‡å¯é çš„è¡Œä¸šæ ‡å‡†ä¸‰ä»¶å¥—ã€‚
- **è®¤è¯ä¸ä¼šè¯ç®¡ç†åº“**:
    - jsonwebtokenÂ å’ŒÂ bcryptjsã€‚
    - **ç†ç”±**: åœ¨â€œé›†ç¾¤è¿æ¥ & åŸºç¡€å¸ƒå±€â€ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®‰å…¨åœ°ç®¡ç†ç”¨æˆ·ä¼šè¯ã€‚jsonwebtokenÂ (JWT) æ˜¯å®ç°æ— çŠ¶æ€è®¤è¯çš„è¡Œä¸šæ ‡å‡†ï¼Œå¯ä»¥ç”¨æ¥ç­¾å‘ä¸€ä¸ªæœ‰æ—¶æ•ˆæ€§çš„ tokenï¼Œè¯æ˜ç”¨æˆ·å·²æˆåŠŸè¿æ¥ã€‚å³ä¾¿æˆ‘ä»¬åˆæœŸä»…å°†ä¼šè¯ä¿¡æ¯å­˜åœ¨å†…å­˜ä¸­ï¼Œä½¿ç”¨ JWT ä¹Ÿæ˜¯ä¸€ä¸ªæ›´è§„èŒƒã€æ›´å®‰å…¨çš„å®è·µã€‚bcryptjsÂ åˆ™æ˜¯åœ¨æˆ‘ä»¬æœªæ¥å¯èƒ½æ”¯æŒç”¨æˆ·å/å¯†ç ç™»å½•æ—¶ï¼Œç”¨äºå¯†ç å“ˆå¸Œçš„æ ‡å‡†åº“ï¼Œæå‰çº³å…¥è€ƒé‡ä½“ç°äº†æˆ‘ä»¬çš„å®‰å…¨å‰ç»æ€§ã€‚
- **æ—¥å¿—åº“**:
    - pinoÂ æˆ–Â winstonã€‚
    - **ç†ç”±**: ä¸€ä¸ªå¥½çš„åç«¯æœåŠ¡å¿…é¡»æœ‰ç»“æ„åŒ–çš„æ—¥å¿—ã€‚pinoÂ ä»¥å…¶æé«˜çš„æ€§èƒ½å’Œ JSON ç»“æ„åŒ–æ—¥å¿—è¾“å‡ºè€Œè‘—ç§°ï¼Œéå¸¸é€‚åˆåœ¨ API è·¯ç”±ä¸­è®°å½•è¯·æ±‚ã€AI æ“ä½œã€é”™è¯¯ç­‰ä¿¡æ¯ï¼Œä¾¿äºæœªæ¥çš„æ—¥å¿—åˆ†æå’Œå‘Šè­¦ã€‚
- **éƒ¨ç½²ä¸è¿è¡Œç¯å¢ƒ**:
    - Docker + Kubernetes (è‡ªéƒ¨ç½²)
    - Helm Chart ç”¨äºæ‰“åŒ…ä¸å‘å¸ƒ
---

# **6. é¡¹ç›®ç»“æ„ (Project Structure)**

## **6.1 è§„åˆ’çš„é¡¹ç›®ç»“æ„ â€” é¢å‘æ¨¡å—åŒ–ç”Ÿé•¿ (Composable Growth)**

> ç›®æ ‡ï¼šä¿æŒå½“å‰å•ä½“ï¼ˆNext.js App Router + Edge Functionsï¼‰é«˜æ•ˆè¿­ä»£ï¼ŒåŒæ—¶ä¸ºæœªæ¥æ‹†åˆ†æˆå¤šä¸ªå¾®æœåŠ¡ / ç‹¬ç«‹å·¥ä½œè´Ÿè½½é¢„åŸ‹è¾¹ç•Œã€‚æ ¸å¿ƒç­–ç•¥æ˜¯â€œå…ˆæ¨¡å—åŒ–ï¼Œå†æœåŠ¡åŒ–â€ã€‚

```
kubecopilot/
â”œâ”€â”€ apps/                          # è¿è¡Œæ—¶å…¥å£å±‚ï¼Œå¯æ‰©å±•åˆ°å¤šä¸ªå‰åç«¯åº”ç”¨
â”‚   â””â”€â”€ console/                   # (ç°çŠ¶) Next.js å•ä½“ï¼›æœªæ¥å¯æŠ½è±¡ä¸ºå‰ç«¯ç‹¬ç«‹åº”ç”¨
â”‚       â”œâ”€â”€ app/                   # App Routerï¼šUIã€è·¯ç”±ã€é€‚é…å±‚
â”‚       â”œâ”€â”€ middleware.ts          # å‰ç«¯ä¾§ä¼šè¯ / feature flag
â”‚       â””â”€â”€ public/                # é™æ€èµ„æº
â”œâ”€â”€ services/                      # é¢å‘å¾®æœåŠ¡çš„è¿è¡Œæ—¶å•å…ƒï¼ˆPhase 2+ï¼‰
â”‚   â”œâ”€â”€ core-api/                  # K8s è¯»å†™ã€ä¼šè¯ã€æƒé™ï¼›å¯è¿ç§»åˆ°ç‹¬ç«‹ Node/Go æœåŠ¡
â”‚   â”œâ”€â”€ ai-orchestrator/           # Prompt registryã€LLM pipelineã€è¯„ä¼°ä»»åŠ¡
â”‚   â””â”€â”€ audit-ledger/              # OperationPlanã€å®¡è®¡æ—¥å¿—ã€äº‹ä»¶å›æ”¾
â”œâ”€â”€ packages/                      # å¯è¢« apps/services å¤ç”¨çš„é¢†åŸŸåŒ…ï¼ˆæ”¯æŒ npm workspaceï¼‰
â”‚   â”œâ”€â”€ domain-k8s/                # Kubernetes DTOã€ç”¨ä¾‹ã€ç­–ç•¥ï¼›å·²ä» `src/lib/k8s/**` è¿å…¥
â”‚   â”œâ”€â”€ domain-ai/                 # Prompt schemaã€AI é£é™©æ¨¡å‹ï¼›å·²ä» `src/lib/ai/**` è¿å…¥
â”‚   â”œâ”€â”€ infra-http/                # fetch/node-fetch å°è£…ã€é”™è¯¯åè®®ï¼›å·²ä» `src/lib/api/**` è¿å…¥
â”‚   â”œâ”€â”€ ui-kit/                    # è®¾è®¡ä½“ç³»ç»„ä»¶ï¼›å·²ä» `src/components/ui/**` è¿å…¥
â”‚   â””â”€â”€ telemetry/                 # ç›‘æ§ã€å®¡è®¡ã€æ—¥å¿—ç»Ÿä¸€ SDKï¼ˆå¾…å»ºè®¾ï¼‰
â”œâ”€â”€ prisma/                        # æ•°æ®è®¿é—®å±‚ï¼›è¿ç§»æ—¶å¯è¢« core-api é‡ç”¨
â”œâ”€â”€ prompts/                       # Prompt Registryï¼ˆç‰ˆæœ¬åŒ–èµ„æºï¼‰
â”œâ”€â”€ patches/                       # å¯¹ç¬¬ä¸‰æ–¹ä¾èµ–çš„ patch-package (ç¡®ä¿ deterministic build)
â”œâ”€â”€ scripts/                       # æœ¬åœ°è„šæœ¬ï¼ˆå¦‚ prompt manifest æ ¡éªŒï¼‰
â”œâ”€â”€ src/lib/operation-plan         # Risk Engineã€Plan æœåŠ¡ã€å®¡è®¡æŒä¹…åŒ–
â”œâ”€â”€ src/lib/prisma.ts              # Prisma client å•ä¾‹
â”œâ”€â”€ src/lib/telemetry              # API è¯·æ±‚æ—¥å¿—åŒ…è£…å™¨ç­‰è§‚æµ‹è¾…åŠ©
â”œâ”€â”€ SSOT.md / README.md            # æ¶æ„ & å›¢é˜Ÿå¯¹é½æ–‡æ¡£
â””â”€â”€ package.json / pnpm-workspace.yaml (æœªæ¥) / turbo.json (æœªæ¥)
```

**æ¼”è¿›è·¯å¾„**

1. **Phase Aï¼ˆå·²å®Œæˆï¼‰**ï¼šä¿ç•™ `apps/console` å•ä½“å½¢æ€ï¼ŒæŒç»­åœ¨ `packages/` æ€ç»´ä¸‹åˆ’åˆ†ç›®å½•ï¼ˆå³ä¾¿ç‰©ç†ä»åœ¨ `src/lib/**`ï¼Œä¹Ÿè¦éµå¾ªåŒ…è¾¹ç•Œçº¦æŸï¼šç¦æ­¢â€œè·¨é¢†åŸŸâ€å¯¼å…¥å†…éƒ¨å®ç°ï¼‰ã€‚
2. **Phase Bï¼ˆè¾¹ç•Œå›ºåŒ–ï¼Œè¿›è¡Œä¸­ï¼‰**ï¼šå·²ç»å¼•å…¥ npm workspaceï¼Œå¹¶æŠŠ `src/lib/k8s/*`ã€`src/lib/ai/*` ç­‰è¿å…¥ `packages/`ï¼›åŒæ—¶åœ¨ `services/` ä¸‹åˆ›å»ºå ä½ï¼ˆstubï¼‰æœåŠ¡ï¼Œå¤ç”¨åŒä¸€å¥— domain åŒ…ï¼Œåç»­å°†è¡¥é½ lint/CI å®ˆæŠ¤ä¸ barrel exportã€‚
3. **Phase Cï¼ˆæœåŠ¡åŒ–æ‹†åˆ†ï¼‰**ï¼šå½“æŸä¸€é¢†åŸŸéœ€è¦ç‹¬ç«‹æ‰©å®¹æˆ–å®‰å…¨éš”ç¦»ï¼ˆå¦‚ `ai-orchestrator` è®¿é—®å¤–éƒ¨ LLMï¼‰ï¼Œå°†å…¶è¿åˆ°ç‹¬ç«‹éƒ¨ç½²å•å…ƒï¼Œåªéœ€æ›¿æ¢ `apps/console` ä¸­çš„ API ç½‘å…³åœ°å€ï¼Œdomain åŒ…å’Œ DTO ä¿æŒä¸å˜ï¼Œå®ç°â€œæ— ç—›æ‹†åˆ†â€ã€‚

é€šè¿‡ä¸Šè¿°è§„åˆ’ï¼Œå›¢é˜Ÿå¯ä»¥åœ¨ä¿æŒäº¤ä»˜é€Ÿåº¦çš„åŒæ—¶ï¼Œé€æ­¥è·å¾—æ¸…æ™°çš„é¢†åŸŸç•Œé™ã€å¯ç»„åˆçš„åŒ…ï¼Œä»¥åŠå¤©ç„¶æ”¯æŒå¾®æœåŠ¡/å¤šè¿è¡Œæ—¶çš„æ¶æ„éª¨æ¶ã€‚


## **6.2 å½“å‰çš„é¡¹ç›®ç»“æ„ (Current Project Structure)**

- `src/app/(dashboard)`ï¼šæŒ‰èµ„æºåŸŸåˆ’åˆ†é¡µé¢ï¼ˆpods/deployments/...ï¼‰ï¼›App Router çš„æœåŠ¡å™¨ç»„ä»¶è´Ÿè´£æ‹‰å–æ•°æ®å¹¶æ‹¼è£… UIï¼Œ`layout.tsx` ç»Ÿä¸€å£³å±‚ï¼Œ`events/` é¡µé¢æä¾›å…¨å±€äº‹ä»¶æ—¶é—´çº¿ã€‚
- `src/app/api`ï¼š  
  - `api/k8s/**/[[...path]]/route.ts` ä¸ºå„èµ„æºæä¾›ç»Ÿä¸€å…¥å£ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€eventsã€æœç´¢ï¼‰ï¼Œè·¯ç”±å±‚åªè§£æå‚æ•°ï¼Œä¸šåŠ¡äº¤ç”± `packages/domain-k8s`ã€‚  
  - `api/ai/diagnose` ç­‰ç›®å½•æ‰¿è½½ AI è°ƒç”¨ä»£ç†ï¼Œå¤ç”¨ `packages/domain-ai` çš„ prompt pipelineã€‚  
  - `api/k8s/search` æä¾›è·¨èµ„æºæœç´¢/èšåˆã€‚
- `src/components/k8s`ï¼šä»¥èµ„æºä¸ºå•ä½æ‹†åˆ† UI ç»„ä»¶ï¼Œ`shared/` ä¸‹çš„ `EventsTable.tsx`ã€`ReadOnlyYamlViewer.tsx`ã€`ResourceDetailPage.tsx`ã€`ResourceTable.tsx` æä¾›ä¸€è‡´çš„è¯¦æƒ…ä½“éªŒï¼›`k8s/**` å†…çš„å¡ç‰‡ã€è¡¨æ ¼æ¶ˆè´¹ typed DTOã€‚
- `packages/ui-kit` & `src/components/layout`ï¼šå°è£… UI åŸºç¡€ç»„ä»¶ï¼ˆåŸºäº shadcn/uiï¼‰ä¸å…¨å±€å¯¼èˆªã€æœç´¢æ ç­‰å¸ƒå±€å…ƒç´ ã€‚
- `src/hooks/useK8sResource.ts`ï¼šé›†ä¸­å¤„ç† SWR æ•°æ®æµã€è½®è¯¢ã€çŠ¶æ€ç®¡ç†ï¼Œä¸º Dashboard é¡µé¢æä¾›ç»Ÿä¸€çš„æ•°æ®è·å–ä½“éªŒã€‚
- `src/lib`ï¼š  
  - `lib/k8s/services` / `transformers` / `types` / `utils`ï¼šKubernetes é¢†åŸŸé€»è¾‘ï¼›`connection.ts` ä¸ `client.ts` è´Ÿè´£ kubeconfigã€API client ç”Ÿå‘½å‘¨æœŸã€‚  
  - `lib/api`ï¼šHTTP å“åº”åŒ…è£…ã€é”™è¯¯ç±»å‹ã€éªŒè¯ã€‚  
  - `lib/ai`ï¼šPrompt schemaã€LLM è¯·æ±‚å°è£…ï¼ˆä¸ `prompts/` çš„ manifest å¯¹é½ï¼‰ã€‚  
  - `lib/formatters`ï¼šè·¨æ¨¡å—å¤ç”¨çš„å±•ç¤ºæ ¼å¼åŒ–å‡½æ•°ã€‚
- `prisma/`ï¼šæ•°æ®æ¨¡å‹å®šä¹‰ï¼›`src/generated/prisma` ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„ Prisma Clientï¼ˆåªè¯»ï¼‰ã€‚
- `prompts/`ï¼šLLM æç¤ºè¯­æ¨¡æ¿ä¸ manifestï¼›`patches/` å­˜æ”¾ `patch-package` ç”Ÿæˆçš„ä¾èµ–è¡¥ä¸ï¼Œä¿è¯æ„å»ºä¸€è‡´æ€§ã€‚
- å…¶ä»–ï¼š`AGENTS.md` / `GEMINI.md` ç­‰è¯´æ˜æ–‡æ¡£ï¼Œ`eslint.config.mjs` / `postcss.config.mjs` / `tailwind` é…ç½®æ”¯æ’‘å·¥ç¨‹åŒ–æ ‡å‡†ã€‚

### **6.2.1 å¯¼èˆªæ¶æ„ V1 (Navigation Architecture V1)**

V1 ç‰ˆæœ¬çš„å¯¼èˆªç»“æ„åæ˜ äº†é¡¹ç›®æ—©æœŸçš„åŠŸèƒ½å¸ƒå±€ï¼Œä¸»è¦ä»¥ AI åŠŸèƒ½å’Œæ‰å¹³åŒ–çš„èµ„æºåˆ—è¡¨ä¸ºæ ¸å¿ƒã€‚

- **Operations (æ“ä½œ)**
  - `Operation Plans`: æŸ¥çœ‹å’Œç®¡ç†ç”± AI ç”Ÿæˆæˆ–ç”¨æˆ·åˆ›å»ºçš„æ“ä½œè®¡åˆ’ã€‚
  - `YAML Copilot`: ä½¿ç”¨ AI è¾…åŠ©ç¼–å†™å’Œå®¡æŸ¥ Kubernetes YAML é…ç½®ã€‚
- **Observability (å¯è§‚æµ‹æ€§)**
  - `Overview`: é›†ç¾¤çš„å…¨å±€æ¦‚è§ˆã€‚
  - `Pods`: æŸ¥çœ‹ Pods åˆ—è¡¨ã€‚
  - `Deployments`: æŸ¥çœ‹ Deployments åˆ—è¡¨ã€‚
  - `StatefulSets`: æŸ¥çœ‹ StatefulSets åˆ—è¡¨ã€‚
  - `DaemonSets`: æŸ¥çœ‹ DaemonSets åˆ—è¡¨ã€‚
  - `Jobs`: æŸ¥çœ‹ Jobs åˆ—è¡¨ã€‚
  - `CronJobs`: æŸ¥çœ‹ CronJobs åˆ—è¡¨ã€‚
  - `ConfigMaps`: æŸ¥çœ‹ ConfigMaps åˆ—è¡¨ã€‚
  - `Secrets`: æŸ¥çœ‹ Secrets åˆ—è¡¨ã€‚
  - `PVCs`: æŸ¥çœ‹ PersistentVolumeClaims åˆ—è¡¨ã€‚
  - `PVs`: æŸ¥çœ‹ PersistentVolumes åˆ—è¡¨ã€‚
  - `Ingresses`: æŸ¥çœ‹ Ingresses åˆ—è¡¨ã€‚
  - `Events`: æŸ¥çœ‹é›†ç¾¤äº‹ä»¶ã€‚
  - `Nodes`: æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹åˆ—è¡¨ã€‚
  - `Services`: æŸ¥çœ‹ Services åˆ—è¡¨ã€‚
  - `Namespaces`: æŸ¥çœ‹ Namespaces åˆ—è¡¨ã€‚

### **6.2.2 å¯¼èˆªæ¶æ„ V2 (Navigation Architecture V2)**

V2 æ˜¯é¢å‘ SRE æ’éšœé—­ç¯çš„ IAï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ï¼šAI èƒ½åŠ›ç½®é¡¶ã€å¯¼èˆªé¡ºåºè´´åˆçœŸå® troubleshooting pathï¼ŒåŒæ—¶ä¿ç•™ä¼ ç»Ÿèµ„æºæ ‘ä½œä¸ºè¾…åŠ©å·¥å…·ã€‚è¯¥ç»“æ„é€šè¿‡ `NEXT_PUBLIC_ENABLE_NAV_V2` feature flag æ§åˆ¶ï¼šç”Ÿäº§é»˜è®¤ä¸º `false`ï¼ˆV1ï¼‰ï¼Œæœ¬åœ°å¼€å‘å¯åœ¨ `.env.local` ä¸­è®¾ç½® `NEXT_PUBLIC_ENABLE_NAV_V2=true` ä½“éªŒ V2ã€‚éœ€è¦å›é€€/åˆ‡æ¢æ—¶ï¼Œåªéœ€è°ƒæ•´åŒåç¯å¢ƒå˜é‡å¹¶é‡æ–°å¯åŠ¨ Next.jsã€‚

- **AI Copilotï¼ˆåŠ©ç†é©¾é©¶èˆ±ï¼‰**
  - *å®šä½*: æ‰€æœ‰â€œä»¥ AI äº¤äº’ä¸ºä¸­å¿ƒâ€çš„å·¥ä½œæµé›†ä¸­åœ¨è¿™é‡Œï¼Œç”¨æˆ·è¿›å…¥æ—¶çš„å¿ƒæ™ºæ˜¯â€œæˆ‘æ¥è®© AI å¸®æˆ‘åšäº‹â€ï¼Œè€Œéæµè§ˆèµ„æºã€‚
  - *å…¸å‹èƒ½åŠ›*: `Ask the Cluster`ï¼ˆè‡ªç„¶è¯­è¨€é—®è¯Šï¼‰ã€`YAML Copilot`ï¼ˆç”Ÿæˆ/æ ¡éªŒ YAMLï¼‰ã€`Operation Plans`ï¼ˆAI ç”Ÿæˆæ“ä½œæ–¹æ¡ˆï¼‰ã€‚
  - *ä½“éªŒç‰¹å¾*: å…¥å£æ˜¯è¾“å…¥æ¡†/è¡¨å•/å‘å¯¼ï¼Œä¸»è¦è¾“å‡ºç»“æ„åŒ–çš„ AI ç»“è®ºï¼ˆåˆ†æ-è®¡åˆ’-å»ºè®®ï¼‰ï¼Œå¯è·¨ namespace/èµ„æºä¸²è”ä¸Šä¸‹æ–‡ï¼Œå¼ºè°ƒäººæœºåä½œï¼ˆAI ææ¡ˆ + äººå®¡é˜…æ‰§è¡Œï¼‰ã€‚
  - *ä¸åš*: ä¸æ‰¿æ‹…å®Œæ•´èµ„æºæµè§ˆã€å›¾è¡¨å±•ç¤ºï¼Œè¿™äº›äº¤ç»™ Resources ä¸ Dashboardsã€‚
- **SRE Mission Controlï¼ˆæ’éšœä»»åŠ¡æµï¼‰**
  - *å®šä½*: ç»™ Oncall/SRE æ’éšœç”¨çš„â€œé©¾é©¶èˆ±â€ï¼Œæ ¸å¿ƒé—®é¢˜æ˜¯â€œå“ªé‡Œä¸å¥åº·ï¼Ÿæˆ‘è¦æ€ä¹ˆæ’æŸ¥ï¼Ÿâ€ï¼Œè€Œä¸æ˜¯ CRUD UIã€‚
  - *åˆ†ç»„*: `Health`ï¼ˆæ€»è§ˆã€Eventsã€AI Diagnosisï¼‰ã€`App Runtime`ï¼ˆPods/Deployments/...ï¼‰ã€`Platform`ï¼ˆConfigMaps/Secrets/...ï¼‰ã€`Infra`ï¼ˆNodes/Namespacesï¼‰ã€‚
  - *ä½“éªŒç‰¹å¾*: èµ„æºæŒ‰å¼‚å¸¸ä¼˜å…ˆçº§æ’åºï¼Œæ”¯æŒæŒ‰â€œè¿‡å» 30 åˆ†é’Ÿé‡å¯ >3 æ¬¡â€è¿™ç±»èšåˆï¼Œé… AI è§£é‡Š/å»ºè®®ã€‚
  - *ä¸åš*: ä¸è¿½æ±‚å­—æ®µå®Œæ•´æ€§ï¼Œä¸åšèµ„æºçº§ CRUDï¼›é‚£æ˜¯ Resources çš„èŒè´£ã€‚
- **Dashboardsï¼ˆä»ªè¡¨ç›˜ï¼‰**
  - *å®šä½*: â€œè¯»æ•° + è¶‹åŠ¿ + TopNâ€ çš„å¯è§†åŒ–æ€åŠ¿è§†å›¾ï¼Œå›ç­”â€œæ•´ä½“æƒ…å†µå¦‚ä½•â€ã€‚
  - *å…¸å‹é¡µé¢*: `Overview`ã€`Node/Workload/Network/Storage Dashboard`ï¼Œä»¥å¡ç‰‡/å›¾è¡¨å±•ç¤ºèµ„æºå¥åº·ã€å»¶è¿Ÿã€æµé‡ã€å®¹é‡è¶‹åŠ¿ï¼Œå¯è·³å…¥ Mission Control/Resources æ·±æŒ–ã€‚
  - *ä¸åš*: ä¸æä¾›ç²¾ç»†æ“ä½œæˆ–å®Œæ•´ Detailï¼Œçº¯åªè¯»ã€‚
- **Resourcesï¼ˆK8s å·¥å…·ç®±ï¼‰** â€” ä¸‰çº§æ ‘ç»“æ„ï¼Œè¦†ç›–æ‰€æœ‰æ—¢æœ‰èµ„æºï¼š
  - *å®šä½*: å¯¹æ ‡ `kubectl get/describe` çš„â€œä¸­ç«‹ã€å®Œæ•´â€èµ„æºæµè§ˆå™¨ï¼Œä¸ºä¸“ä¸šç”¨æˆ·æä¾›å…¨éƒ¨å­—æ®µ/YAML/Eventsã€‚
  - `Workloads` â†’ Pods / Deployments / StatefulSets / DaemonSets / Jobs / CronJobs
  - `Networking` â†’ Services / Ingresses
  - `Config & Storage` â†’ ConfigMaps / Secrets / PVCs / PVs
  - `Cluster` â†’ Nodes / Namespaces
  - *ä½“éªŒç‰¹å¾*: `/resources/<kind>` é‡‡ç”¨ä¼˜åŒ–çš„ä¸¤æ å¸ƒå±€ï¼šæ¡Œé¢ç«¯å·¦åˆ—æ˜¯å¸¦å·¥å…·æ çš„è¡¨æ ¼ï¼ˆè¿‡æ»¤å™¨æ”¶æ•›åˆ° toolbarã€åˆ—è¡¨åœ¨é™å®šé«˜åº¦å†…æ»šåŠ¨ï¼‰ï¼Œå³åˆ—ä¸ºå¯æŠ˜å /å¯è°ƒæ•´å®½åº¦çš„ Inspectorï¼ˆå†…å®¹ç”¨å“åº”å¼å¡ç‰‡ç½‘æ ¼ + ç²˜æ€§ tabs å‘ˆç° Summary/Spec/Status/Events/YAMLï¼‰ï¼›ç§»åŠ¨ç«¯ Inspector ä»¥ Drawer + Accordion å‘ˆç°ï¼Œé¿å…è¿‡é•¿æ»šåŠ¨ã€‚
  - *åŒºåˆ«*: ä¸ Mission Control çš„â€œé—®é¢˜ä¼˜å…ˆâ€ä¸åŒï¼Œè¿™é‡Œæ˜¯â€œèµ„æºä¼˜å…ˆâ€ã€‚
- **Auditï¼ˆå®¡è®¡ & æ“ä½œè®°å½•ï¼‰**
  - *å®šä½*: è®°å½•â€œè°åœ¨ä»€ä¹ˆæ—¶å€™ã€ä¸ºä½•å¯¹é›†ç¾¤åšäº†ä»€ä¹ˆâ€ï¼Œæ˜¯ AI+äººç±»è¿ç»´è¡Œä¸ºçš„è´¦æœ¬ã€‚
  - `Operation History` (`/audit/operations`)ï¼šå±•ç¤ºæ¯æ¡ Operation Plan çš„ç”Ÿæˆ/æ‰§è¡Œ/ç»“æœã€‚
  - `Audit Events` (`/audit/events`)ï¼šå…³é”®æ“ä½œäº‹ä»¶ï¼ˆåˆ é™¤èµ„æºã€æ‰©ç¼©å®¹ç­‰ï¼‰ã€‚
  - `API Logs` (`/audit/api-logs`)ï¼šåç«¯è°ƒç”¨ K8s API çš„æ—¥å¿—ã€‚
  - *å­—æ®µ*: `time`ã€`actor`ã€`action`ã€`resources affected`ã€`source`ï¼ˆæ¥è‡ª AI/Mission Control/æ‰‹å·¥ï¼‰ã€`status`ã€`reason/comment`ã€‚
  - *ä½“éªŒç‰¹å¾*: æ—¶é—´çº¿/è¡¨æ ¼è§†å›¾ï¼Œå¼ºè°ƒè¿‡æ»¤ã€å®¡è®¡ã€è¿½è´£ï¼Œä¸æä¾›ç›´æ¥æ“ä½œã€‚

> **å ä½è·¯ç”±ç­–ç•¥**
> 
> ä¸ºé¿å…å¯¼èˆªé“¾æ¥ 404ï¼Œæ‰€æœ‰ V2 æ–°å¢å…¥å£éƒ½å¿…é¡»å…ˆåˆ›å»º Next.js é¡µé¢ï¼ˆè¿”å› `<div>ğŸš§ Coming Soon</div>`ï¼‰ã€‚å¯¹åº”ç›®å½•ï¼š
> - `src/app/ask-cluster/page.tsx`
> - `src/app/ai-diagnosis/page.tsx`
> - `src/app/dashboards/{cluster,workloads,network,storage}/page.tsx`
> - `src/app/audit/{operations,api-logs,events}/page.tsx`
>
> åç»­å®ç°åŠŸèƒ½æ—¶ç›´æ¥æ›¿æ¢é¡µé¢å†…å®¹ï¼Œæ— éœ€æ”¹å¯¼èˆªé…ç½®ã€‚

> **æœªæ¥æ‰©å±•**
> 
> Network Policiesã€Storage Classesã€CRDs ç­‰ä»åœ¨è§„åˆ’ä¸­ï¼Œåªåœ¨ SSOT ä¸­è®°å½•ï¼Œä¸åœ¨ V2 UI ä¸­å‡ºç°ï¼Œä»¥å…äº§ç”Ÿâ€œåŠŸèƒ½ä¸å¯ç”¨ / æƒé™è¢«ç¦â€è¯¯è§£ã€‚å‘å¸ƒç›¸åº”é¡µé¢åå†è¿½åŠ åˆ° `navConfigV2`.



# **7. æ ¸å¿ƒæ¶æ„ (Core Architecture)**

```mermaid
graph TD
    subgraph "ç”¨æˆ·æµè§ˆå™¨"
        A[å‰ç«¯ UI - Next.js]
    end

    subgraph "åç«¯æœåŠ¡ (Next.js API Routes)"
        B[API ç½‘å…³]
        C[K8s å®‰å…¨ä»£ç†]
        D[AI ç¼–æ’å™¨ Orchestrator]
        E[é£é™©å¼•æ“ Risk Engine]
        F[ä¼šè¯å­˜å‚¨ Session Store]
        G[å®¡è®¡å­˜å‚¨ Audit Store]
    end

    subgraph "å¤–éƒ¨ä¾èµ–"
        H[Kubernetes API Server]
        I[LLM Provider OpenAI/Gemini]
        J[ç›‘æ§æº: Prometheus]
        K[æ•°æ®åº“: PostgreSQL/SQLite]
    end

    A -->|/api/k8s/*| B --> C
    A -->|/api/ai/*| B --> D

    C --> H
    D --> I
    D --> E
    D --> G
    E --> G

    B --> F
    G --> K

    D --> C
    D --> J

```

- **å‰ç«¯ (Frontend)**: çº¯ UI å±‚ï¼Œè´Ÿè´£ç”¨æˆ·äº¤äº’ï¼ŒåŒ…æ‹¬**å‘½ä»¤é¢æ¿ (Prompt Bar)** å’Œèµ„æºçš„å¯è§†åŒ–å±•ç¤ºã€‚
- **K8s å®‰å…¨ä»£ç† (Secure Proxy)**: åç«¯ä¸­å”¯ä¸€ä¸ K8s API Server é€šä¿¡çš„æ¨¡å—ã€‚è´Ÿè´£å¤„ç†æ‰€æœ‰ `kubectl` é£æ ¼çš„è¯·æ±‚ã€‚
- **AI ç¼–æ’å™¨ (AI Orchestrator)**: æ ¸å¿ƒå¤§è„‘ã€‚æ¥æ”¶æ¥è‡ªå‰ç«¯çš„è‡ªç„¶è¯­è¨€æˆ–æ“ä½œæ„å›¾ï¼Œè°ƒç”¨ LLM ç”Ÿæˆç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚è¯Šæ–­ã€`OperationPlan`ï¼‰ï¼Œå¹¶ä¸é£é™©å¼•æ“å’Œå®¡è®¡æ¨¡å—äº¤äº’ã€‚
- **é£é™©å¼•æ“ (Risk Engine)**: æ ¹æ®é¢„è®¾è§„åˆ™å’Œ AI è¯„åˆ†ï¼Œä¸º `OperationPlan` è¯„å®šé£é™©ç­‰çº§ï¼Œå¹¶å†³å®šæ˜¯å¦éœ€è¦äººå·¥ç¡®è®¤ã€‚
- **å®¡è®¡å­˜å‚¨ (Audit Store)**: è®°å½•æ‰€æœ‰é‡è¦æ“ä½œï¼Œå°¤å…¶æ˜¯ AI ç”Ÿæˆçš„è®¡åˆ’å’Œç”¨æˆ·çš„ç¡®è®¤è¡Œä¸ºï¼Œæä¾›ä¸å¯ç¯¡æ”¹çš„è¿½æº¯ä¾æ®ã€‚
- **[æœªæ¥è€ƒé‡]**: ä¸ºæ”¯æŒæœªæ¥çš„é«˜å¯ç”¨éƒ¨ç½²ï¼Œä¼šè¯å­˜å‚¨éœ€è¦ä»å†…å­˜æ¨¡å¼å¹³æ»‘å‡çº§åˆ°å¤–éƒ¨å…±äº«å­˜å‚¨æ¨¡å¼ï¼ˆå¦‚ Redisï¼‰ã€‚

> **èŒè´£çŸ©é˜µ**

| æ¨¡å— | ä¸»è¦èŒè´£ | å½“å‰å®ç° | å¯ç‹¬ç«‹éƒ¨ç½² | å…³é”®ä¾èµ– |
| --- | --- | --- | --- | --- |
| å‰ç«¯ Console | UIã€å‘½ä»¤é¢æ¿ã€PlanConfirmModalã€å¯è§†åŒ– | Next.js App Router | âœ…ï¼ˆPhase 3 ä»¥åï¼‰ | `packages/ui-kit`ã€API ç½‘å…³ |
| K8s Secure Proxy | è½¬å‘ REST/gRPCã€å‡­è¯æ ¡éªŒã€èµ„æºèšåˆ | Next.js Route Handler / `services/core-api` é¢„ç•™ | âœ… | Kubernetes API Serverã€Prisma |
| AI Orchestrator | Prompt Registryã€LLM è°ƒç”¨ã€RiskAnnotator | Next.js Route Handler / `services/ai-orchestrator` é¢„ç•™ | âœ… | LLM Providerã€Prompt Manifest |
| Risk Engine | è®¡åˆ’é£é™©æ‰“åˆ†ã€é”™è¯¯é¢„ç®—ç­–ç•¥ | `packages/domain-ai`ï¼ˆPhase 2 ç®€åŒ–è§„åˆ™ï¼‰ | âœ… | OperationPlan å®¡è®¡åº“ã€SLO æ¨¡å— |
| Audit Ledger | OperationPlan ç”Ÿå‘½å‘¨æœŸã€æ‰§è¡Œå®¡è®¡ | Prismaï¼ˆPostgreSQL/SQLiteï¼‰ | âš ï¸ï¼ˆéœ€å…±äº«æ•°æ®åº“ï¼‰ | æ•°æ®åº“ã€èº«ä»½ä½“ç³» |
| Telemetry å±‚ | è¯·æ±‚æ—¥å¿—ã€metricsã€tracing | å¾…å¼•å…¥ `packages/telemetry` | âœ… | OpenTelemetryã€æ—¥å¿—ç®¡çº¿ |

# 8. æ ¸å¿ƒæ•°æ®ç»“æ„:OperationPlan

è¿™æ˜¯è¿æ¥ AI ä¸ Kubernetes çš„æ ¸å¿ƒå¥‘çº¦ï¼Œ**æ˜¯æœ¬é¡¹ç›®æœ€é‡è¦çš„æŠ½è±¡**ã€‚æ‰€æœ‰å†™æ“ä½œéƒ½å¿…é¡»å…ˆè¢«å°è£…æˆä¸€ä¸ªOperationPlanã€‚
å…³é”®ç»“æ„ä¸è§£é‡Šé€»è¾‘
    Pre-Execution Checkï¼šæ‰§è¡Œå‰å†æ¬¡æ¯”å¯¹ diff.before ä¸å½“å‰èµ„æºçŠ¶æ€ï¼Œé˜²æ­¢çŠ¶æ€æ¼‚ç§»ã€‚
    Action Whitelistï¼šAI ä»…å¯åœ¨ç™½åå•å†…ç”Ÿæˆ Planã€‚
    Schema Versioningï¼šOperationPlan çš„ Zod Schema éœ€å¸¦ç‰ˆæœ¬å·ï¼Œç¡®ä¿å‡çº§æ—¶å…¼å®¹æ€§ã€‚
    ä¸‰å±‚å¯è§†åŒ–æ¨¡å‹ï¼š
        å±‚ 1ï¼šè‡ªç„¶è¯­è¨€æ‘˜è¦
        å±‚ 2ï¼šç»“æ„åŒ– Patch åˆ—è¡¨
        å±‚ 3ï¼šSide-by-Side YAML Diff (é»˜è®¤æŠ˜å )

**Schema (Zod å®šä¹‰):**

```typescript
import { z } from 'zod';

// RFC 6902 JSON Patch object schema
const jsonPatchSchema = z.array(
  z.object({
    op: z.enum(['add', 'remove', 'replace']),
    path: z.string(),
    value: z.any().optional(),
  })
);

export const OperationPlanSchema = z.object({
  id: z.string().uuid(),
  version: z.string().default('1'),
  status: z.enum(['pending', 'confirmed', 'executed', 'failed', 'reverted']),
  action: z.enum(['create', 'update', 'delete', 'scale', 'restart']),
  steps: z
    .array(
      z.object({
        id: z.string(),
        action: z.enum(['create', 'update', 'delete', 'scale', 'restart']),
        description: z.string(),
        patch: jsonPatchSchema.optional(),
        rollbackPatch: jsonPatchSchema.optional(),
      }),
    )
    .default([]),
  resource: z.object({
    kind: z.string(),
    namespace: z.string(),
    name: z.string(),
    uid: z.string().optional(),
    resourceVersion: z.string().optional(),
  }),
  diff: z.object({
    // ç”¨äºæ‰§è¡Œå‰ç»ˆæ€æ£€æŸ¥å’Œ UI æ·±åº¦å¯¹æ¯”çš„å®Œæ•´èµ„æºå¿«ç…§
    before: z.record(z.string(), z.any()).nullable(),
    // ç”¨äºé«˜æ•ˆå­˜å‚¨å’Œæ¸…æ™°å±•ç¤ºå˜æ›´æ ¸å¿ƒçš„ JSON Patch
    patch: jsonPatchSchema,
    patchFormat: z.enum(['rfc6902', 'strategic-merge']).default('rfc6902'),
    rollbackPatch: jsonPatchSchema.optional(),
  }),
  risk: z.object({
    level: z.enum(['low', 'medium', 'high']),
    rationale: z.string(), // AI/è§„åˆ™ç»™å‡ºçš„é£é™©è¯„ä¼°ç†ç”±
    score: z.number().min(0).max(1).nullable(),
    factors: z.array(z.string()).default([]),
    sloBudgetImpact: z.enum(['none', 'low', 'medium', 'high']).optional(),
    postConditions: z.array(z.string()).default([]),
  }),
  aiRationale: z.string(), // AI è§£é‡Šä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªæ“ä½œ
  audit: z.object({
    requestedBy: z.string(), // 'user:alice' or 'ai:anomaly-detector'
    confirmedBy: z.string().nullable(),
    executedBy: z.string(),
    idempotencyKey: z.string().optional(),
    sourcePromptId: z.string().optional(),
    timestamps: z.object({
      createdAt: z.date(),
      confirmedAt: z.date().nullable(),
      executedAt: z.date().nullable(),
      failedAt: z.date().nullable(),
      revertedAt: z.date().nullable(),
    }),
  }),
});
```

**ç¤ºä¾‹ï¼šDeployment é‡å¯è®¡åˆ’**

```json
{
  "id": "8f4f3b3d-1c0d-4f0c-9f6f-2d0c4c0b5c1a",
  "version": "1",
  "status": "pending",
  "action": "restart",
  "steps": [
    {
      "id": "step-1",
      "action": "update",
      "description": "Annotate deployment to trigger rollout",
      "patch": [
        { "op": "add", "path": "/spec/template/metadata/annotations/restart.kubecopilot.io~1ts", "value": "2025-01-12T06:20:00Z" }
      ],
      "rollbackPatch": [
        { "op": "remove", "path": "/spec/template/metadata/annotations/restart.kubecopilot.io~1ts" }
      ]
    }
  ],
  "resource": {
    "kind": "Deployment",
    "namespace": "payments",
    "name": "billing-api",
    "uid": "c0327b2f-2b63-4c50-9b1b-95cb5b0b0d5f",
    "resourceVersion": "123456"
  },
  "diff": {
    "before": { "...": "omitted for brevity" },
    "patch": [
      { "op": "add", "path": "/spec/template/metadata/annotations/restart.kubecopilot.io~1ts", "value": "2025-01-12T06:20:00Z" }
    ],
    "patchFormat": "rfc6902",
    "rollbackPatch": [
      { "op": "remove", "path": "/spec/template/metadata/annotations/restart.kubecopilot.io~1ts" }
    ]
  },
  "risk": {
    "level": "medium",
    "rationale": "Rolling restart of production workload",
    "score": 0.42,
    "factors": ["traffic_spike_window"],
    "sloBudgetImpact": "medium",
    "postConditions": ["All pods reach Ready state within 5 minutes"]
  },
  "aiRationale": "Deployment pods are stuck in CrashLoopBackOff; restart to refresh configuration.",
  "audit": {
    "requestedBy": "user:alice",
    "confirmedBy": null,
    "executedBy": "system",
    "idempotencyKey": "plan-billing-api-restart-20250112",
    "sourcePromptId": "diagnose-pod@1.1.0",
    "timestamps": {
      "createdAt": "2025-01-12T06:19:55.000Z",
      "confirmedAt": null,
      "executedAt": null,
      "failedAt": null,
      "revertedAt": null
    }
  }
}
```
- **æ ¸å¿ƒæŒ‘æˆ˜ 1**: ä»æœºå™¨è¯­è¨€åˆ°äººç±»ç›´è§‰ (Core Challenge: From Machine Language to Human Intuition)
    - **é—®é¢˜**: OperationPlan å†…éƒ¨é‡‡ç”¨ JSON Patch æ ¼å¼æ¥é«˜æ•ˆå­˜å‚¨å˜æ›´ï¼Œä½†è¿™å¯¹äºäººç±»ç”¨æˆ·æ˜¯éš¾ä»¥ç›´æ¥é˜…è¯»çš„ã€‚ä¸ºäº†åœ¨ PlanConfirmModal ä¸­æä¾›ç›´è§‚ã€æ— æ­§ä¹‰çš„å˜æ›´å®¡æŸ¥ä½“éªŒï¼Œæˆ‘ä»¬å¿…é¡»å°†æœºå™¨å‹å¥½çš„æ•°æ®ç»“æ„ç¿»è¯‘æˆäººç±»å‹å¥½çš„å¯è§†åŒ–ç•Œé¢ã€‚
    - **è§£å†³æ–¹æ¡ˆ**: åˆ†å±‚å¯è§†åŒ–ç­–ç•¥ (Layered Visualization Strategy)
- **æ ¸å¿ƒæŒ‘æˆ˜ 2**: å˜æ›´å®¡æŸ¥çš„é€æ˜åº¦å’Œå¯è§£é‡Šæ€§ (Core Challenge: Transparency and Interpretability of Change Reviews)
    - **é—®é¢˜**: è™½ç„¶ OperationPlan æä¾›äº†è¯¦ç»†çš„å˜æ›´è®°å½•ï¼Œä½†ç›´æ¥å±•ç¤º JSON Patch å¯¹éæŠ€æœ¯ç”¨æˆ·æ¥è¯´æ˜¯éå¸¸æŠ½è±¡å’Œä¸ç›´è§‚çš„ã€‚
    - **è§£å†³æ–¹æ¡ˆ**: æˆ‘ä»¬å°†é‡‡ç”¨ä¸€ä¸ªä¸‰å±‚é€’è¿›çš„ä¿¡æ¯å±•ç¤ºæ¨¡å‹ï¼Œä»¥æ»¡è¶³ä¸åŒç”¨æˆ·çš„å®¡æŸ¥æ·±åº¦éœ€æ±‚ï¼š
        - **ç¬¬ä¸€å±‚**ï¼šäººç±»å¯è¯»çš„æ‘˜è¦ (Human-Readable Summary): åœ¨æ¨¡æ€æ¡†é¡¶éƒ¨ç”¨è‡ªç„¶è¯­è¨€æ¸…æ™°æ€»ç»“æ ¸å¿ƒæ“ä½œ (ä¾‹å¦‚: "å°† Deployment 'my-app' çš„å‰¯æœ¬æ•°å˜æ›´ä¸º 5")ã€‚è¿™æ˜¯æ‰€æœ‰ç”¨æˆ·ç¬¬ä¸€çœ¼çœ‹åˆ°çš„ä¿¡æ¯ã€‚
        - **ç¬¬äºŒå±‚**ï¼šç»“æ„åŒ–å˜æ›´åˆ—è¡¨ (Structured Change List): ä¸€ä¸ªç®€æ´çš„è¡¨æ ¼ï¼Œé€é¡¹åˆ—å‡ºæ‰€æœ‰å˜æ›´çš„è·¯å¾„ (path) å’Œæ–°å€¼ (value)ï¼Œä¾›æŠ€æœ¯ç”¨æˆ·å¿«é€Ÿæµè§ˆç»†èŠ‚ã€‚
        - **ç¬¬ä¸‰å±‚**ï¼šå®Œæ•´çš„å¹¶æ’å·®å¼‚è§†å›¾ (Full Side-by-Side Diff View): é»˜è®¤æŠ˜å çš„ã€ç±»ä¼¼ GitHub PR çš„é«˜äº® YAML å·®å¼‚å¯¹æ¯”ã€‚å®ƒé€šè¿‡åœ¨å‰ç«¯å°† diff.patch åº”ç”¨äº diff.before å¯¹è±¡æ¥åŠ¨æ€ç”Ÿæˆâ€œä¹‹åâ€çš„çŠ¶æ€ï¼Œä¸ºé«˜é£é™©æ“ä½œæä¾›æœ€é«˜çº§åˆ«çš„å®¡æŸ¥èƒ½åŠ›ã€‚

- **è¡¥å……è¯´æ˜ 1**:Â OperationPlan ç”Ÿæˆä¸ diff.before å¡«å……æ—¶æœº
    - diff.beforeÂ å­—æ®µå¿…é¡»åœ¨**ç”Ÿæˆ OperationPlan çš„é‚£ä¸€åˆ»**ï¼Œé€šè¿‡å‘ K8s API Server æŸ¥è¯¢èµ„æºçš„**å½“å‰çŠ¶æ€**æ¥å¡«å……ã€‚diff.afterÂ åˆ™æ˜¯æ ¹æ®ç”¨æˆ·æ„å›¾å’Œå½“å‰çŠ¶æ€è®¡ç®—å‡ºçš„**æœŸæœ›çŠ¶æ€**ã€‚
    - æ—¶é—´æˆ³å­—æ®µä¸ºâ€œå®¡è®¡â€å’Œâ€œäº‹åå¤ç›˜â€æä¾›äº†ç²¾ç¡®åˆ°æ¯«ç§’çš„å…³é”®è¯æ®é“¾ã€‚æˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çŸ¥é“ä¸€ä¸ªè®¡åˆ’ä»è¢«åˆ›å»ºã€è¢«ç¡®è®¤åˆ°è¢«æ‰§è¡Œåˆ†åˆ«èŠ±è´¹äº†å¤šé•¿æ—¶é—´ã€‚
    - **ç†ç”±**: è¿™å¼ºè°ƒäº†ä¸€ä¸ªå…³é”®çš„å®ç°ç»†èŠ‚ã€‚å¦‚æœä¸åœ¨ç”Ÿæˆè®¡åˆ’æ—¶å°±å›ºå®šÂ beforeÂ çŠ¶æ€ï¼Œé‚£ä¹ˆä»è®¡åˆ’ç”Ÿæˆåˆ°ç”¨æˆ·ç¡®è®¤çš„è¿™æ®µæ—¶é—´å†…ï¼Œèµ„æºçš„çœŸå®çŠ¶æ€å¯èƒ½åˆå‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¼šå¯¼è‡´æ‰§è¡Œç»“æœä¸é¢„æœŸä¸ç¬¦ã€‚å›ºå®šÂ diffÂ å¿«ç…§æ˜¯ä¿è¯æ“ä½œç¡®å®šæ€§çš„é‡è¦ä¸€ç¯ã€‚
- **è¡¥å……è¯´æ˜ 2**:Â OperationPlan æ‰§è¡Œå‰ç»ˆæ€æ£€æŸ¥
    - **Pre-Execution Check (æ‰§è¡Œå‰ç»ˆæ€æ£€æŸ¥)**: åœ¨æ‰§è¡Œ /api/ai/execute æ—¶ï¼Œç³»ç»Ÿå¿…é¡»åœ¨æ‰§è¡Œæ“ä½œå‰ï¼Œé‡æ–°ä» K8s API è·å–èµ„æºçš„å½“å‰çŠ¶æ€ï¼Œå¹¶ä¸ OperationPlan.diff.before å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚è‹¥ä¸ä¸€è‡´ï¼Œå¿…é¡»ä¸­æ­¢æ“ä½œå¹¶å‘ç”¨æˆ·æŠ¥å‘Šã€‚
    - **Action Whitelist (æ“ä½œç™½åå•)**: AI ç¼–æ’å™¨åœ¨ç”Ÿæˆ OperationPlan åï¼Œå¿…é¡»æ ¹æ®ä¸€ä¸ªç¡¬ç¼–ç çš„ (action, resource.kind) ç™½åå•è¿›è¡Œæ ¡éªŒã€‚ä¾‹å¦‚ï¼ŒåˆæœŸç™½åå•å¯èƒ½åªåŒ…å« ('restart', 'Deployment'), ('scale', 'Deployment')ã€‚ä»»ä½•ä¸åœ¨ç™½åå•å†…çš„è®¡åˆ’éƒ½å°†è¢«æ‹’ç»ã€‚
    - **ç†ç”±**: è¿™ä¸¤æ¡åŸåˆ™æ˜¯â€œå®‰å…¨é»˜è®¤â€è®¾è®¡å“²å­¦çš„å…·ä½“ä»£ç å®ç°ï¼Œèƒ½ä»æ ¹æœ¬ä¸Šæœç»çŠ¶æ€æ¼‚ç§»å’Œ AI â€œè¶Šæƒâ€æ“ä½œå¸¦æ¥çš„é£é™©ï¼Œæ˜¯æˆ‘ä»¬æ„å»ºå¯ä¿¡èµ–å†™æ“ä½œçš„åŸºçŸ³ã€‚
- **è¡¥å……è¯´æ˜ 3**:Â å¤šæ­¥éª¤è®¡åˆ’ä¸å›æ»šå‡†å¤‡
    - å½“ `steps[]` éç©ºæ—¶ï¼Œæ¯ä¸ªæ­¥éª¤éœ€ç»‘å®šå¯é€‰ `rollbackPatch`ï¼Œæ‰§è¡Œå™¨åœ¨å¤±è´¥æ—¶æŒ‰ç…§é€†åºå¥—ç”¨ï¼Œä¿è¯â€œå¯æ¢å¤â€èƒ½åŠ›ã€‚
    - `idempotencyKey` ä½¿æ‰§è¡Œç«¯å¯ä»¥å®‰å…¨é‡è¯•ï¼Œ`sourcePromptId` å°† OperationPlan ä¸ Prompt Registry çš„æ¡ç›®ä¸²è”ï¼Œæ–¹ä¾¿è¿½æº¯ AI å†³ç­–æ¥æºã€‚
    - æ‰§è¡Œå‰é™¤äº†å¯¹æ¯” `diff.before`ï¼Œè¿˜éœ€è¦æ ¡éªŒ `resource.resourceVersion` æ˜¯å¦ä¸ K8s å½“å‰å€¼åŒ¹é…ï¼Œç¡®ä¿ä¸ä¼šè¦†ç›–å¤–éƒ¨æ›´æ–°ã€‚

- **OperationPlan å·®å¼‚å¯è§†åŒ–**ï¼šä»æœºå™¨è¯­è¨€åˆ°äººç±»ç›´è§‰ (Diff Visualization: From Machine Language to Human Intuition)
    - **æ ¸å¿ƒæŒ‘æˆ˜**: OperationPlan å†…éƒ¨é‡‡ç”¨ JSON Patch æ ¼å¼é«˜æ•ˆå­˜å‚¨å˜æ›´ï¼Œä½†è¿™å¯¹äºäººç±»ç”¨æˆ·æ˜¯éš¾ä»¥é˜…è¯»çš„ã€‚ä¸ºäº†åœ¨ PlanConfirmModal ä¸­æä¾›ç›´è§‚ã€æ— æ­§ä¹‰çš„å˜æ›´å®¡æŸ¥ä½“éªŒï¼Œæˆ‘ä»¬å¿…é¡»å°†æœºå™¨å‹å¥½çš„æ•°æ®ç»“æ„ç¿»è¯‘æˆäººç±»å‹å¥½çš„å¯è§†åŒ–ç•Œé¢ã€‚
    - **è§£å†³æ–¹æ¡ˆ**: åˆ†å±‚å±•ç¤ºç­–ç•¥ (Layered Display Strategy)
        æˆ‘ä»¬å°†é‡‡ç”¨ä¸€ä¸ªä¸‰å±‚é€’è¿›çš„ä¿¡æ¯å±•ç¤ºæ¨¡å‹ï¼Œä»¥æ»¡è¶³ä¸åŒç”¨æˆ·çš„å®¡æŸ¥æ·±åº¦éœ€æ±‚ï¼š
        - **ç¬¬ä¸€å±‚**ï¼šäººç±»å¯è¯»çš„æ‘˜è¦ (Human-Readable Summary)
        ç›®æ ‡ç”¨æˆ·: æ‰€æœ‰ç”¨æˆ·ã€‚
        å½¢å¼: åœ¨æ¨¡æ€æ¡†é¡¶éƒ¨ç”¨è‡ªç„¶è¯­è¨€æ¸…æ™°æ€»ç»“æ ¸å¿ƒæ“ä½œã€‚
        å®ç°: åç«¯æˆ–å‰ç«¯å°† JSON Patch æ•°ç»„æ˜ å°„ä¸ºç®€æ´çš„æè¿°æ€§æ–‡æœ¬ã€‚
        ç¤ºä¾‹:
        JSON Patch: [{ "op": "replace", "path": "/spec/replicas", "value": 5 }]
        UI æ˜¾ç¤º: "å°† Deployment 'my-app' çš„å‰¯æœ¬æ•° (replicas) å˜æ›´ä¸º 5"
        - **ç¬¬äºŒå±‚**ï¼šç»“æ„åŒ–å˜æ›´åˆ—è¡¨ (Structured Change List)
        ç›®æ ‡ç”¨æˆ·: æŠ€æœ¯ç”¨æˆ·ï¼Œéœ€è¦å¿«é€Ÿæµè§ˆå˜æ›´ç»†èŠ‚ã€‚
        å½¢å¼: ä¸€ä¸ªç®€æ´çš„è¡¨æ ¼ï¼Œé€é¡¹åˆ—å‡ºæ‰€æœ‰å˜æ›´çš„è·¯å¾„å’Œæ–°å€¼ã€‚
        å®ç°: ç›´æ¥éå† JSON Patch æ•°ç»„å¹¶æ ¼å¼åŒ–è¾“å‡ºã€‚
        UI æ˜¾ç¤º:
        | æ“ä½œ | ç›®æ ‡è·¯å¾„ | æ–°å€¼ |
        | :--- | :--- | :--- |
        | replace | /spec/replicas | 5 |
        - **ç¬¬ä¸‰å±‚**ï¼šå®Œæ•´çš„å¹¶æ’å·®å¼‚è§†å›¾ (Full Side-by-Side Diff View)
        ç›®æ ‡ç”¨æˆ·: é«˜çº§ç”¨æˆ·æˆ–åœ¨è¿›è¡Œé«˜é£é™©æ“ä½œæ—¶ï¼Œéœ€è¦è¿›è¡Œæ·±åº¦ä»£ç çº§å®¡æŸ¥ã€‚
        å½¢å¼: ç±»ä¼¼ GitHub PR çš„ã€é«˜äº®çš„ã€å¹¶æ’ YAML å·®å¼‚å¯¹æ¯”ã€‚
    å®ç°: æ­¤è§†å›¾é»˜è®¤æŠ˜å ã€‚ç‚¹å‡»å±•å¼€åï¼Œå‰ç«¯å°†ä½¿ç”¨ OperationPlan ä¸­ç¼“å­˜çš„ before çŠ¶æ€ï¼Œå¹¶åŠ¨æ€åº”ç”¨ JSON Patch æ¥ç”Ÿæˆ after çŠ¶æ€ï¼Œç„¶åä½¿ç”¨ react-diff-viewer ç­‰åº“è¿›è¡Œæ¸²æŸ“ã€‚
    æˆ˜ç•¥ä»·å€¼: æ­¤ç­–ç•¥å®Œç¾è·µè¡Œäº†â€œå¼€å‘è€…ä½“éªŒè‡³ä¸Šâ€çš„åŸåˆ™ã€‚å®ƒé€šè¿‡ä¿¡æ¯åˆ†å±‚ï¼Œæ—¢ä¸ºå¿«é€Ÿã€ä½é£é™©çš„æ“ä½œæä¾›äº†æµç•…çš„ç¡®è®¤æµç¨‹ï¼Œä¹Ÿä¸ºå¤æ‚ã€é«˜é£é™©çš„å˜æ›´æä¾›äº†æœ€é«˜çº§åˆ«çš„å®‰å…¨å®¡æŸ¥èƒ½åŠ›ï¼Œåœ¨æ•ˆç‡å’Œä¸¥è°¨ä¹‹é—´å–å¾—äº†æœ€ä½³å¹³è¡¡ã€‚

# 9. æ ¸å¿ƒæ•°æ®ç»“æ„ï¼š Prompt Registry & Schema Governance

ä¸ºè½åœ° â€œPrompt as Infraâ€ï¼Œæ–°å¢ Prompt Registry
```json
[
  {
    "id": "diagnose-pod",
    "version": "1.1.0",
    "schemaRef": "ai-diagnosis.zod.ts",
    "lastEvaluated": "2025-10-15",
    "approved": true,
    "model": "gpt-4.2",
    "temperature": 0.2,
    "maxTokens": 1200,
    "envAllowlist": ["prod", "staging"],
    "riskTier": "low",
    "category": "diagnostics",
    "owner": "ai-platform",
    "reviewedBy": ["sre-lead", "ml-safety"],
    "changelog": [
      {
        "version": "1.1.0",
        "date": "2025-10-15",
        "notes": "Improved node pressure hints"
      }
    ],
    "evaluationMetrics": {
      "accuracy": 0.87,
      "coverage": 0.92,
      "lastRun": "2025-10-12"
    },
    "inputSchemaRef": "diagnose-pod.input.zod.ts",
    "outputSchemaRef": "diagnose-pod.output.zod.ts",
    "rollout": {
      "strategy": "percentage",
      "stages": [
        { "percent": 10, "conditions": ["staging-only"] },
        { "percent": 50, "conditions": ["errorRate < 5%"] },
        { "percent": 100, "conditions": ["manual-approval"] }
      ]
    }
  }
]
```

Prompt Pipeline

æ‰€æœ‰ AI è¯·æ±‚å¿…é¡»ç»è¿‡ç»Ÿä¸€ç®¡çº¿ï¼š
```json
contextBuilder â†’ promptLoader â†’ LLM call â†’ ZodValidator â†’ RiskAnnotator
```
æ”¶ç›Šï¼šPrompt å¯æ²»ç†ã€å¯è¿½æº¯ã€å¯ç°åº¦å‘å¸ƒï¼Œä¸ºæœªæ¥å•†ä¸šç‰ˆæ‰“åŸºç¡€ã€‚

- **æ²»ç†è¡¥å……**ï¼š  
  - `inputSchemaRef` / `outputSchemaRef` ç¡®ä¿ä¸Šä¸‹æ¸¸ä»¥åŒä¸€å¥‘çº¦äº¤äº’ï¼ŒZod æ ¡éªŒå¤±è´¥æ—¶éœ€è§¦å‘ fallback prompt æˆ–ä¸­æ­¢æ‰§è¡Œå¹¶ä¸ŠæŠ¥ã€‚  
  - `evaluationMetrics` ä¸ `rollout` å­—æ®µä½¿æˆ‘ä»¬å¯ä»¥è®°å½•ç¦»çº¿æµ‹è¯„ç»“æœã€é€æ­¥æ‰©å¤§è¦†ç›–é¢ï¼Œå¹¶ç»“åˆ `envAllowlist` æ§åˆ¶ä¸åŒç¯å¢ƒçš„å¯ç”¨ç­–ç•¥ã€‚  
  - `owner`ã€`reviewedBy`ã€`changelog` æ„æˆå®Œæ•´çš„ Prompt å®¡æ‰¹é“¾ï¼›ä»»ä½•æ”¹åŠ¨å¿…é¡»é€šè¿‡ Registry æäº¤ï¼Œæ‰§è¡Œå™¨åŸºäº `riskTier` ä¸ `model` é€‰æ‹©å¯¹åº”çš„å®‰å…¨ç­–ç•¥ã€‚  
  - RiskAnnotator å¯ä¾æ® `riskTier`ã€æœ€è¿‘æŒ‡æ ‡è‡ªåŠ¨è°ƒé«˜äººç±»å®¡æ ¸é˜ˆå€¼ï¼Œä¾‹å¦‚é«˜é£é™© Prompt é»˜è®¤è¦æ±‚ OperationPlan å†ç»è¿‡äººå·¥ç¡®è®¤ã€‚
  - `npm run validate:prompts` æ ¡éªŒæ¸…å•ï¼Œæ‰§è¡Œ Zod æ¨¡å¼ä¸æ¨¡æ¿æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥ï¼Œä¸º CI æä¾›å¿«é€Ÿå®ˆé—¨ã€‚

> **å‘å¸ƒæµç¨‹**
>
> 1. **è‰ç¨¿**ï¼šç»´æŠ¤è€…æ›´æ–° `prompts/manifest.json` ä¸å¯¹åº”æ¨¡æ¿ï¼Œæäº¤ PRã€‚  
> 2. **è‡ªåŠ¨éªŒè¯**ï¼šCI è¿è¡Œ manifest æ ¡éªŒè„šæœ¬ï¼Œæ£€æŸ¥ schema å¼•ç”¨ã€ç°åº¦é…ç½®ã€è¯„ä¼°æŒ‡æ ‡æ˜¯å¦å¡«å†™ã€‚  
> 3. **äººå·¥å®¡æ ¸**ï¼š`owner` æŒ‡æ´¾è¯„å®¡ï¼ˆSRE/AI å®¡æ ¸ï¼‰ç¡®è®¤é£é™©ã€åˆè§„æ€§ï¼Œå¿…è¦æ—¶è¡¥å……è¯„ä¼°æŠ¥å‘Šã€‚  
> 4. **ç°åº¦å‘å¸ƒ**ï¼šæ ¹æ® `rollout.strategy` é€æ­¥æ‰©å¤§è¦†ç›–ï¼Œç›‘æ§ `evaluationMetrics`ã€‚  
> 5. **æ­£å¼ä¸Šçº¿**ï¼šæ»¡è¶³é€€å‡ºæ¡ä»¶åï¼Œå°† `approved` æ ‡è®°ä¸º true å¹¶è®°å½• `changelog`ã€‚è‹¥æŒ‡æ ‡æ¶åŒ–åˆ™å›æ»šè‡³å‰ä¸€ç‰ˆæœ¬æˆ–å¯ç”¨ fallback promptã€‚


# **10. å¼€å‘è·¯çº¿å›¾ (Revised Roadmap)**

è¿™æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬å°†å®å¤§çš„æ„¿æ™¯åˆ†è§£ä¸ºæ›´åŠ¡å®ã€æ›´èšç„¦çš„å››ä¸ªé˜¶æ®µã€‚

---

## **Phase 1: åŸºç¡€æ¶æ„ä¸ AI åªè¯»æ´å¯Ÿ (Foundation & Read-Only AI Insights)**

*ç›®æ ‡ï¼šæ­å»ºé¡¹ç›®éª¨æ¶ï¼Œå®ç°é›†ç¾¤è¿æ¥ï¼Œå¹¶**é¦–æ¬¡å±•ç¤º AI çš„â€œè§£é‡Šâ€èƒ½åŠ›**ï¼Œè®©ç”¨æˆ·ç«‹åˆ»æ„Ÿå—åˆ°ä»·å€¼ï¼Œä½†æ²¡æœ‰ä»»ä½•é£é™©ã€‚*

- [x]  **ç¯å¢ƒæ­å»º**:
    - [x]  æ­å»ºäº†ç°ä»£åŒ–ã€å…¨æ ˆçš„æŠ€æœ¯æ ˆ:
        - [x]  é¡¹ç›®åˆå§‹åŒ–: ä½¿ç”¨ Next.js 14 (App Router), TypeScript, Tailwind CSS å’Œ shadcn/ui åˆ›å»ºäº†é¡¹ç›®éª¨æ¶ã€‚
        - [x]  ä¾èµ–é›†æˆ: å®‰è£…äº†æ‰€æœ‰æ ¸å¿ƒä¾èµ–ï¼ŒåŒ…æ‹¬ @kubernetes/client-node ç”¨äº K8s é€šä¿¡ï¼ŒPrisma ç”¨äºæ•°æ®åº“äº¤äº’ï¼ŒZod ç”¨äº AI è¾“å‡ºæ ¡éªŒã€‚
    - [x]  å»ºç«‹äº†è‡ªåŠ¨åŒ–çš„ä»£ç è´¨é‡ä¿éšœä½“ç³»:
        - [x]  å·¥å…·é“¾: é…ç½®äº† ESLint, Prettier, Husky å’Œ lint-stagedã€‚
        - [x]  å·¥ä½œæµ: å®ç°äº†åœ¨æ¯æ¬¡ git commit æ—¶ï¼Œé€šè¿‡ pre-commit é’©å­è‡ªåŠ¨å¯¹ä»£ç è¿›è¡Œæ ¼å¼åŒ–å’Œé™æ€æ£€æŸ¥ï¼Œç¡®ä¿äº†ä»£ç åº“çš„é•¿æœŸæ•´æ´ä¸è§„èŒƒã€‚
        - [x]  æ’é”™ä¸å®Œå–„: è§£å†³äº† pre-commit é’©å­çš„é»˜è®¤è¡Œä¸ºé—®é¢˜ï¼Œå¹¶æ®æ­¤æ˜ç¡®äº†é¡¹ç›®çš„åˆ†é˜¶æ®µæµ‹è¯•ç­–ç•¥ã€‚
    - [x]  **å®Œæˆäº†é¡¹ç›®ç‰ˆæœ¬æ§åˆ¶çš„åˆå§‹åŒ–**:
        - [x]  æˆåŠŸå°†é¡¹ç›®åˆå§‹åŒ–ä¸º Git ä»“åº“ã€‚
        - [x]  å®Œæˆäº†é¦–æ¬¡æäº¤ï¼Œå¹¶å°†é¡¹ç›®æ¨é€åˆ°äº†è¿œç¨‹ä»“åº“ã€‚
- [x]  **é›†ç¾¤è¿æ¥ & åŸºç¡€å¸ƒå±€**:
    - [x]  ä»»åŠ¡ 1: åˆ›å»º /connect è¿æ¥é¡µé¢:
        - [x]  UI å¼€å‘: ä½¿ç”¨ shadcn/ui ç»„ä»¶ï¼ˆå¦‚ Card, Label, Textarea, Buttonï¼‰æ„å»ºä¸€ä¸ªç®€æ´çš„ UI ç•Œé¢ã€‚ä¸€ä¸ªå¤§çš„æ–‡æœ¬åŸŸï¼ˆTextareaï¼‰ï¼Œç”¨äºè®©ç”¨æˆ·ç²˜è´´ä»–ä»¬çš„ Kubeconfig YAML å†…å®¹ã€‚ä¸€ä¸ªâ€œè¿æ¥â€æŒ‰é’®ã€‚
        - [ ]  UI å¢å¼º: å¢åŠ æ–‡ä»¶ä¸Šä¼ æŒ‰é’®ï¼Œåœ¨å‰ç«¯è§£ææ–‡ä»¶å†…å®¹å¹¶å¡«å……åˆ°æ–‡æœ¬åŸŸã€‚
        - [ ]  ï¼ˆå¯é€‰ï¼‰æä¾›ä¸€äº›æç¤ºä¿¡æ¯ï¼Œè¯´æ˜å¦‚ä½•è·å– Kubeconfigã€‚
        - [x]  çŠ¶æ€ç®¡ç†: ä½¿ç”¨ Zustand æˆ– useState æ¥ç®¡ç†æ–‡æœ¬åŸŸä¸­çš„ Kubeconfig å†…å®¹ã€‚
    - [x]  ä»»åŠ¡ 2: å®ç°åç«¯è¿æ¥ API (/api/k8s/connect):
        - [x]  API è·¯ç”±: åˆ›å»ºä¸€ä¸ª Next.js API Routeï¼Œç”¨äºæ¥æ”¶å‰ç«¯æäº¤çš„ Kubeconfig å­—ç¬¦ä¸²ã€‚
        - [x]  æœåŠ¡ç«¯éªŒè¯: åœ¨åç«¯ï¼Œä½¿ç”¨ @kubernetes/client-node åº“æ¥è§£æè¿™ä¸ª Kubeconfig å­—ç¬¦ä¸²ã€‚å°è¯•ç”¨è§£æå‡ºçš„å‡­è¯åˆå§‹åŒ–ä¸€ä¸ª Kubernetes API å®¢æˆ·ç«¯å®ä¾‹ã€‚æ‰§è¡Œä¸€ä¸ªç®€å•çš„ã€åªè¯»çš„ API è°ƒç”¨ï¼ˆä¾‹å¦‚ listNamespace æˆ– getComponentStatusï¼‰æ¥éªŒè¯å‡­è¯çš„æœ‰æ•ˆæ€§å’Œä¸é›†ç¾¤çš„è¿é€šæ€§ã€‚
        - [x]  ä¼šè¯ç®¡ç† (ç®€åŒ–ç‰ˆ):å¦‚æœéªŒè¯æˆåŠŸï¼Œå°†è¿™ä¸ª Kubeconfig å†…å®¹å®‰å…¨åœ°å­˜å‚¨åœ¨æœåŠ¡ç«¯çš„ä¼šè¯ä¸­ï¼ˆåˆæœŸæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç®€å•çš„å†…å­˜å­˜å‚¨æˆ–åŠ å¯†çš„ Cookieï¼‰ã€‚ä¸¥ç¦å°† Kubeconfig è¿”å›æˆ–å­˜å‚¨åœ¨å‰ç«¯ã€‚å¦‚æœéªŒè¯å¤±è´¥ï¼Œè¿”å›ä¸€ä¸ªæ˜ç¡®çš„é”™è¯¯ä¿¡æ¯ã€‚
    - [x]  ä»»åŠ¡ 3: å®ç°è¿æ¥åçš„è·³è½¬ä¸è®¤è¯ä¿æŠ¤:
        - [x]  å‰ç«¯é€»è¾‘: å½“ç”¨æˆ·ç‚¹å‡»â€œè¿æ¥â€å¹¶æ”¶åˆ°åç«¯çš„æˆåŠŸå“åº”åï¼Œä½¿ç”¨ Next.js çš„ useRouter å°†é¡µé¢é‡å®šå‘åˆ° /ã€‚
        - [x]  è®¤è¯ä¸­é—´ä»¶ (Middleware): åˆ›å»ºä¸€ä¸ª Next.js Middlewareï¼Œç”¨äºä¿æŠ¤ (/) è·¯ç”±ç»„ä¸‹çš„æ‰€æœ‰é¡µé¢ã€‚è¿™ä¸ªä¸­é—´ä»¶ä¼šæ£€æŸ¥ç”¨æˆ·çš„ä¼šè¯ä¸­æ˜¯å¦å­˜åœ¨æœ‰æ•ˆçš„é›†ç¾¤è¿æ¥å‡­è¯ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œå°±å°†å…¶é‡å®šå‘å› /connect é¡µé¢ã€‚
    - [x]  ä»»åŠ¡ 4: æ­å»ºåŸºç¡€ä»ªè¡¨ç›˜å¸ƒå±€ (/layout.tsx):
        - [x]  UI æ¡†æ¶: åˆ›å»ºä¸€ä¸ªåŒ…å«ä¾§è¾¹æ  (Sidebar) å’Œé¡¶éƒ¨æ  (Header) çš„åŸºç¡€å“åº”å¼å¸ƒå±€ã€‚
        - [x]  ä¾§è¾¹æ : æš‚æ—¶æ”¾ç½®ä¸€äº›é™æ€é“¾æ¥ï¼ŒæŒ‡å‘æˆ‘ä»¬æœªæ¥å°†è¦å¼€å‘çš„é¡µé¢ï¼ˆå¦‚ Namespaces, Pods, Deploymentsï¼‰ã€‚
        - [x]  å†…å®¹åŒºåŸŸ: å¸ƒå±€ä¸­åº”åŒ…å«ä¸€ä¸ªä¸»å†…å®¹åŒºåŸŸï¼Œç”¨äºæ¸²æŸ“å„ä¸ªé¡µé¢ï¼ˆä¾‹å¦‚ / çš„æ¦‚è§ˆé¡µï¼‰ã€‚
- [x]  **æ ¸å¿ƒèµ„æºæµè§ˆ (åªè¯») - åˆ—è¡¨é¡µ**:
    - [x]  æ­å»ºäº†å¯å¤ç”¨çš„æ•°æ®è·å–æ¨¡å¼ (useK8sResource Hook) å’Œ UI ç»„ä»¶ (Table, Skeleton)ã€‚
    - [x]  æˆåŠŸå®ç°äº† Namespaces, Pods, Deployments, Services çš„åˆ—è¡¨å±•ç¤ºã€‚
- [x]  **æ ¸å¿ƒèµ„æºæµè§ˆ (åªè¯») - è¯¦æƒ…é¡µ**:
    - [x]  ç›®æ ‡: ä¸ºæ‰€æœ‰æ ¸å¿ƒèµ„æºåˆ›å»ºè¯¦æƒ…é¡µï¼Œä½œä¸ºåç»­ AI åŠŸèƒ½ï¼ˆå¦‚è¯Šæ–­ï¼‰çš„è½½ä½“ã€‚
    - [x]  é¡µé¢æ¨¡æ¿: å°†ä»¥ Pod è¯¦æƒ…é¡µä¸ºæ¨¡æ¿ï¼Œå»ºç«‹ä¸€ä¸ªåŒ…å«åŸºç¡€ä¿¡æ¯å¡ç‰‡ã€å¯å¤ç”¨çš„äº‹ä»¶è¡¨æ ¼ (EventsTable) å’Œå¯å¤ç”¨çš„åªè¯» YAML æŸ¥çœ‹å™¨ (ReadOnlyYamlViewer) çš„æ ‡å‡†å¸ƒå±€ã€‚
    - [x]  å®ç°èŒƒå›´:
        - [x]  Pods è¯¦æƒ…é¡µ
        - [x]  Deployments è¯¦æƒ…é¡µ
        - [x]  Services è¯¦æƒ…é¡µ
        - [x]  Namespaces è¯¦æƒ…é¡µ
- [x]  **AI æ´å¯Ÿ MVP (AI Insight MVP)**:
    - [x]  ä»»åŠ¡ 1: UI å®ç°: åœ¨ Pod è¯¦æƒ…é¡µï¼Œæ·»åŠ ä¸€ä¸ªâ€œAI è¯Šæ–­â€æŒ‰é’®å’Œä¸€ä¸ªç”¨äºå±•ç¤ºç»“æœçš„é¢æ¿ (å¯ä»¥ä½¿ç”¨ Alert æˆ– Accordion ç»„ä»¶)ã€‚
    - [x]  ä»»åŠ¡ 2: åç«¯ API (/api/ai/diagnose/pod):
        - [x]  åˆ›å»º API è·¯ç”±ï¼Œæ¥æ”¶ namespace å’Œ podNameã€‚
        - [x]  è°ƒç”¨ K8s å®¢æˆ·ç«¯ï¼Œå¹¶è¡Œè·å–è¯¥ Pod çš„ describe (é€šè¿‡ readNamespacedPod)ã€events (é€šè¿‡ listNamespacedEvent å¹¶æŒ‰ involvedObject è¿‡æ»¤) å’Œ logs (é€šè¿‡ readNamespacedPodLog)ã€‚
        - [x]  (æ–°) æ•°æ®é¢„å¤„ç†: å¯¹è·å–çš„æ—¥å¿—è¿›è¡Œåˆæ­¥æ¸…æ´—ï¼Œç§»é™¤è¿‡é•¿çš„ã€é‡å¤çš„è¡Œï¼Œä¸º LLM å‡†å¤‡ä¸€ä¸ªå¹²å‡€çš„ä¸Šä¸‹æ–‡ã€‚
    - [x]  ä»»åŠ¡ 3: AI Prompt ä¸è§£æ:
        - [x]  åœ¨ /prompts ç›®å½•ä¸‹åˆ›å»º diagnose-pod.mdï¼Œè®¾è®¡ä¸€ä¸ªåŒ…å«ä¸Šä¸‹æ–‡ã€è§’è‰²æ‰®æ¼”å’Œç»“æ„åŒ–è¾“å‡ºè¦æ±‚çš„ Prompt æ¨¡æ¿ã€‚
        - [x]  è°ƒç”¨ LLM Provider APIï¼Œå¹¶ä½¿ç”¨ Zod Schema (ai-diagnosis.ts) ä¸¥æ ¼æ ¡éªŒè¿”å›çš„ JSONã€‚
    - [x]  ä»»åŠ¡ 4: å‰ç«¯æ¸²æŸ“: å‰ç«¯æ¥æ”¶åˆ°ç»“æ„åŒ–çš„ JSON åï¼Œä½¿ç”¨ Badgeã€åˆ—è¡¨ç­‰ç»„ä»¶å°†å…¶ç¾è§‚åœ°å±•ç¤ºå‡ºæ¥ï¼ˆä¾‹å¦‚ï¼šStatus: Unhealthy Reason: CrashLoopBackOff Suggestion: ...ï¼‰ã€‚
- [x]  **æ ¸å¿ƒèµ„æºå¹¿åº¦è¦†ç›– (Broaden Core Resource Coverage)**:
    ç›®æ ‡ï¼šå¿«é€Ÿæå‡åªè¯» Dashboard çš„å®ç”¨æ€§ã€‚æ²¿ç”¨ç°æœ‰â€œåˆ—è¡¨ + ResourceDetailPage + Events/YAMLâ€éª¨æ¶ï¼Œç¡®ä¿æ¯ä¸ªæ–°å¢èµ„æºéƒ½å…·å¤‡å®Œæ•´çš„è¯¦æƒ… tabsã€‚
    - [x]  å·¥ä½œè´Ÿè½½ï¼ˆä¼˜å…ˆçº§é«˜ï¼Œå¤ç”¨ Deployment/Pod æ¨¡å¼ï¼‰
        - [x]  StatefulSets (åˆ—è¡¨/è¯¦æƒ…)
        - [x]  DaemonSets (åˆ—è¡¨/è¯¦æƒ…)
        - [x]  Jobs & CronJobs (åˆ—è¡¨/è¯¦æƒ…)
    - [x]  é…ç½®ä¸å­˜å‚¨
        - [x]  ConfigMaps (è¯¦æƒ…æ˜¾ç¤º dataï¼Œå¿…è¦æ—¶æŠ˜å )
        - [x]  Secrets (è¯¦æƒ…é»˜è®¤æ¨¡ç³Šï¼Œæä¾›â€œæ˜¾ç¤ºâ€æŒ‰é’®)
        - [x]  PersistentVolumeClaims & PersistentVolumes
    - [x]  ç½‘ç»œ
        - [x]  Ingresses (åˆ—è¡¨/è¯¦æƒ…)
    - [x]  é›†ç¾¤çº§/äº‹ä»¶
        - [x]  Nodes (åˆ—è¡¨/è¯¦æƒ…)
        - [x]  Events æ€»è§ˆï¼ˆå¯æŒ‰ namespace / kind è¿‡æ»¤ï¼‰
- **é˜¶æ®µæˆæœ**: ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ã€è¦†ç›–äº† SRE æ—¥å¸¸ 90% å¸¸ç”¨èµ„æºçš„ K8s åªè¯» Dashboardï¼Œå¹¶æ‹¥æœ‰ç‹¬ç‰¹çš„ AI è¯Šæ–­ Pod çš„èƒ½åŠ›ã€‚
- **é€€å‡ºæ ‡å‡†**:
  - `/connect` å·¥ä½œæµåœ¨æœ¬åœ°ä¸æµ‹è¯•é›†ç¾¤ä¸­ç¨³å®šå·¥ä½œï¼Œè¿æ¥å¤±è´¥åœºæ™¯æœ‰æ¸…æ™°æç¤ºã€‚
  - Pod è¯Šæ–­ API è¿”å›ç¬¦åˆ Zod Schema çš„ç»“æ„åŒ–ç»“æœï¼Œå¹¶åœ¨ UI ä¸­å¯è§†åŒ–å‘ˆç°ã€‚
  - è‡³å°‘ 10 ç§æ ¸å¿ƒ K8s èµ„æºå…·å¤‡â€œåˆ—è¡¨ + è¯¦æƒ… + äº‹ä»¶/YAMLâ€ä¸‰ä»¶å¥—ä½“éªŒã€‚
  - åŸºç¡€ UI å¸ƒå±€ã€å¯¼èˆªã€ä¼šè¯ä¿æŠ¤ä¸ eslint/husky æ ¡éªŒå…¨éƒ¨ä¸Šçº¿å¹¶é€šè¿‡ã€‚
---

## **Phase 2: å®‰å…¨å†™è·¯å¾„ä¸æ¨¡å—åŒ–åœ°åŸº (Safe Writes & Modular Foundations)**

*ç›®æ ‡ï¼šå®Œæˆ OperationPlan çš„æœ€å°å¯ç”¨é—­ç¯ï¼ŒåŒæ—¶ä¸ºæœªæ¥æ‹†åˆ†å’Œè§‚æµ‹åŸ‹ç‚¹å¥ å®šåŸºç¡€ã€‚*

- [x]  **UI ä½“éªŒåŸºçº¿**  
  - [x]  æ‰“ç£¨å‘½ä»¤é¢æ¿ï¼šæ”¯æŒå¿«æ·é”®ï¼ˆâŒ˜K / Ctrl+Kï¼‰ã€å³æ—¶æœç´¢ç»“æœã€æ“ä½œå†å²ã€‚  
  - [x]  PlanConfirmModal è§†è§‰ç»Ÿä¸€ï¼ˆåˆ†å±‚ diffã€é£é™©å¾½æ ‡ã€å›é€€æç¤ºï¼‰ï¼Œå¹¶ä¿æŒç§»åŠ¨ç«¯é˜…è¯»å‹å¥½ã€‚  
  - [x]  å¼ºåŒ–åˆ—è¡¨/è¯¦æƒ…å¯¼èˆªï¼Œç¡®ä¿ OperationPlan ç”Ÿæˆåå¯ä¸€é”®è·³è½¬è‡³ç›¸å…³èµ„æºã€‚

- [ ]  **å®‰å…¨å†™è·¯å¾„ MVP**  
  - [x]  å®Œæˆå‘½ä»¤é¢æ¿ MVPï¼ˆè‡ªç„¶è¯­è¨€ â†’ åˆ—è¡¨æŸ¥è¯¢ â†’ OperationPlan ç”Ÿæˆå…¥å£ï¼Œå½“å‰ä»¥å‘½ä»¤æ¨¡æ¿/fixtures é©±åŠ¨ï¼‰ã€‚  
  - [x]  åç«¯æä¾› `/api/ai/plan` ä¸ `/api/ai/execute`ï¼Œå®ç° `OperationPlan` ç”Ÿæˆã€æŒä¹…åŒ–ã€å®¡è®¡å†™å…¥ï¼ˆå½“å‰ä»¥å†…å­˜å­˜å‚¨ + æ§åˆ¶å°å®¡è®¡è®°å½•å®ç°ï¼Œå¾…æ¥å…¥ Prisma æŒä¹…å±‚ï¼‰ã€‚  
  - [x]  æ‰§è¡Œå‰æ ¡éªŒ `resourceVersion`ã€`idempotencyKey`ï¼Œå¤±è´¥æ—¶ä¸­æ­¢å¹¶å›å†™é”™è¯¯ã€‚  
  - [x]  é£é™©å¼•æ“åˆç‰ˆï¼šåŸºäºç™½åå• + è§„åˆ™åˆ¤å®šé£é™©ç­‰çº§ï¼Œå†™å…¥å®¡è®¡ã€‚  
  - [x]  PlanConfirmModal æŒ‰ä¸‰å±‚å¯è§†åŒ–ç­–ç•¥å±•ç¤º diff ä¸é£é™©ï¼Œè®©ç”¨æˆ·ç¡®è®¤/å–æ¶ˆã€‚

- [ ]  **Prompt Registry æ²»ç†è½åœ°**  
  - [x]  åœ¨ `prompts/manifest` ä¸­æ·»åŠ  `inputSchemaRef`ã€`outputSchemaRef`ã€`riskTier`ã€`rollout` å­—æ®µï¼Œå¹¶å†™å…¥è‹¥å¹²æ ·ä¾‹ï¼ˆå½“å‰è¦†ç›– `diagnose-pod`ï¼Œåç»­æ‹“å±•å…¶ä½™ Promptï¼‰ã€‚  
- [x]  ç¼–å†™éªŒè¯è„šæœ¬/CIï¼Œç¡®ä¿ Manifest ä¸ `packages/domain-ai` schema å¯¹é½ï¼ˆ`npm run validate:prompts` æ ¡éªŒæ–‡ä»¶å­˜åœ¨ä¸ Zod å¥‘çº¦ï¼‰ã€‚  
  - [x]  RiskAnnotator æ ¹æ® Prompt å…ƒæ•°æ®åŠ¨æ€è°ƒæ•´é£é™©æƒé‡ï¼ˆ`riskTier` ä¼šæŠ¬é«˜æœ€ä½é£é™©ç­‰çº§ã€åˆ†å€¼ä¸å®¡æ‰¹æç¤ºï¼‰ã€‚  
  - [x]  è®°å½• `sourcePromptId` åˆ° OperationPlan å®¡è®¡é“¾ï¼Œå½¢æˆ prompt â†’ plan â†’ æ‰§è¡Œé—­ç¯ã€‚

- [x]  **ç›®å½•æ¨¡å—åŒ– / Workspace å‡†å¤‡**  
  - [x]  å¼•å…¥ npm workspace éª¨æ¶ï¼Œå°† `src/lib/k8s/**`ã€`src/lib/ai/**` è¿å…¥ `packages/domain-k8s` ä¸ `packages/domain-ai`ã€‚  
  - [x]  æ–°å»º `packages/infra-http` æä¾› fetch/é”™è¯¯åè®®ã€`packages/ui-kit` æŠ½å–å…±äº« UIã€‚  
  - [x]  é…ç½® TS path alias + lint è§„åˆ™ï¼Œç¦æ­¢è·¨åŒ…å¼•ç”¨å†…éƒ¨å®ç°ã€‚  
  - [x]  åœ¨ `services/` ä¸‹åˆ›å»º `core-api`ã€`ai-orchestrator` å ä½ï¼ˆstubï¼‰ï¼Œç¡®ä¿ domain åŒ…å¯ç›´æ¥å¤ç”¨ã€‚

- [ ]  **å¯è§‚æµ‹æ€§ä¸å®¡è®¡åº•åº§**  
  - [x]  æ”¶é›† `/api/k8s/*`ã€`/api/ai/*` è¯·æ±‚æ—¥å¿—ã€OperationPlan çŠ¶æ€æµè½¬ï¼ŒæŒä¹…åŒ–åˆ° Prismaã€‚  
  - [x]  ä¸º prompt æ‰§è¡Œã€plan æ‰§è¡Œæ·»åŠ åŸºç¡€ metricsï¼ˆæˆåŠŸç‡ã€å¤±è´¥åŸå› åˆ†å¸ƒï¼‰ã€‚  
  - [x]  æä¾›æœ€å°çš„æ—¥å¿—/metrics å¯¼å‡ºèƒ½åŠ›ï¼ˆä¾‹å¦‚ OpenTelemetry stubï¼‰ï¼Œä¸ºåç»­ SLO æ¨¡å—é“ºè·¯ã€‚

- **é˜¶æ®µæˆæœï¼ˆå½“å‰è¿›å±•ï¼‰**ï¼šå‘½ä»¤é¢æ¿ã€PlanConfirmModal ä¸é£é™©å¼•æ“æ”¯æ’‘çš„æœ€å°å†™è·¯å¾„å·²é—­ç¯ï¼›Prompt Registryã€Workspace æ‹†åˆ†ä¸è§‚æµ‹æŒä¹…åŒ–ä»åœ¨æ’æœŸä¸­ï¼Œéœ€åœ¨è½åœ°åå†å®£å‘Š Phase 2 é€€å‡ºã€‚
- **é€€å‡ºæ ‡å‡†**:
  - å‘½ä»¤é¢æ¿æ”¯æŒæŸ¥è¯¢ä¸è‡³å°‘ä¸€ç§å†™æ“ä½œï¼ˆå¦‚é‡å¯ Deploymentï¼‰ï¼Œæ‰§è¡Œé“¾è·¯ç»è¿‡ PlanConfirmModal å®¡æ‰¹ã€‚
  - OperationPlan ä»¥ `resourceVersion`/`idempotencyKey` æ‰§è¡ŒæˆåŠŸï¼Œå®¡è®¡è®°å½•å®Œæ•´ï¼Œé£é™©åˆ†çº§ç”Ÿæ•ˆã€‚
  - Prompt Manifest é€šè¿‡ CI æ ¡éªŒï¼Œå‘å¸ƒæµç¨‹éµå¾ªâ€œè‰ç¨¿â†’ç°åº¦â†’ä¸Šçº¿â€ï¼Œé£é™©ç­‰çº§ä¸ Rollout å­—æ®µå®é™…è¢«æ¶ˆè´¹ã€‚
  - `packages/domain-*` ä¸ `packages/ui-kit` ç­‰åŒ…å®Œæˆæ‹†åˆ†ï¼Œlint é˜²æŠ¤åˆ°ä½ï¼›`services/*` stub å¯åœ¨ CI æ„å»ºã€‚
  - æ ¸å¿ƒ API/AI è·¯ç”±çš„æ—¥å¿—ä¸åŸºç¡€æŒ‡æ ‡ï¼ˆæˆåŠŸç‡ã€é”™è¯¯ç±»å‹ï¼‰å¯åœ¨ç›‘æ§é¢æ¿ä¸­æŸ¥çœ‹ã€‚

---

## **Phase 3: æ™ºèƒ½åä½œä¸æœåŠ¡åŒ–è¯•ç‚¹ (Intelligent Collaboration & Serviceification Pilot)**

*ç›®æ ‡ï¼šåœ¨å®‰å…¨åŸºç¡€ä¸Šå¢å¼º AI åä½œä½“éªŒï¼ŒåŒæ—¶éªŒè¯å•ä½“æ‹†åˆ†çš„å¯è¡Œæ€§ã€‚*

- [ ]  **UI åä½œå‡çº§**  
  - [ ]  èµ„æºè¯¦æƒ…é¡µå¼•å…¥ AI è¾…åŠ©ä¾§æ ï¼ˆè¯Šæ–­ã€å»ºè®®ã€å›æ”¾ï¼‰ï¼Œæ”¯æŒæ‹–æ‹½æ’å…¥ Planã€‚  
- [x]  YAML Copilot é‡‡ç”¨åˆ†å±å¸ƒå±€ï¼ˆç¼–è¾‘åŒº + AI é¢æ¿ï¼‰ï¼Œæ”¯æŒæç¤ºã€æ”¹å†™ã€é¢„è§ˆå¯¹æ¯”ã€‚  
  - [ ]  æ‹“æ‰‘å›¾æä¾›äº¤äº’å¼æç¤ºï¼šèŠ‚ç‚¹æ‚¬æµ®ä¿¡æ¯å¡ã€Plan å½±å“èŒƒå›´é«˜äº®ã€ä¸€æ­¥è·³è½¬åˆ°ç›¸å…³è¯¦æƒ…ã€‚

- [ ]  **YAML Copilot + å¤šæ­¥éª¤ OperationPlan**  
- [x]  é›†æˆ Monaco Editor + AI é¢æ¿ï¼Œæ”¯æŒè§£é‡Šã€Best Practice æ£€æŸ¥ã€ç”Ÿæˆè¡¥ä¸ã€‚  
  - [ ]  AI å»ºè®®è½åœ°ä¸º `steps[]` å¤šæ­¥éª¤ OperationPlanï¼Œæ¯æ­¥å¯é™„å¸¦ `rollbackPatch`ã€‚  
  - [ ]  PlanConfirmModal æ”¯æŒæ­¥éª¤æŸ¥çœ‹ã€å›æ»šç­–ç•¥æç¤ºï¼Œå¹¶è®°å½•æ‰§è¡Œå‰/åçš„ telemetryã€‚

- [ ]  **å¯è§‚æµ‹æ€§å¢å¼º**  
  - [ ]  é›†æˆ Prometheus / Metrics APIï¼Œä¸º Pods/Nodes æä¾› CPUã€å†…å­˜è¶‹åŠ¿ï¼Œå¹¶æ³¨å…¥è¯Šæ–­ä¸Šä¸‹æ–‡ã€‚  
  - [ ]  å¼•å…¥åŸºç¡€ tracingï¼Œæ ‡è®° prompt â†’ plan â†’ execute çš„å»¶è¿Ÿä¸å¤±è´¥ç‚¹ã€‚  
  - [ ]  ä»ªè¡¨æ¿å±•ç¤º OperationPlan æˆåŠŸç‡ã€æ¡ˆä¾‹åº“ï¼ˆå…¸å‹ plan ä¸æ‰§è¡Œç»“æœï¼‰ã€‚

- [ ]  **æœåŠ¡åŒ– PoC**  
  - [ ]  å°† AI Orchestrator çš„æ ¸å¿ƒé€»è¾‘æŠ½ç¦»åˆ° `services/ai-orchestrator`ï¼ˆNode/Edge å‡½æ•°ï¼‰ï¼Œå‰ç«¯é€šè¿‡ API ç½‘å…³è®¿é—®ã€‚  
  - [ ]  `services/core-api` æä¾›ç»Ÿä¸€çš„ K8s è®¿é—®ä»£ç†ï¼ŒApp Router ä»…ä½œä¸º BFFã€‚  
  - [ ]  Domain åŒ…é€šè¿‡ npm workspace å…±äº«ï¼ŒéªŒè¯æ— ç—›è¿ç§»ï¼›è¡¥å……éƒ¨ç½²è„šæœ¬/è¯´æ˜ã€‚

- [ ]  **èµ„æºæ‹“æ‰‘ / AI å®¡é˜…ååŒ**  
  - [ ]  å®ç° `/api/k8s/topology`ï¼Œå‰ç«¯ç”¨ ReactFlow æ¸²æŸ“æ‹“æ‰‘å›¾ã€‚  
  - [ ]  AI åœ¨ç”Ÿæˆ Plan æ—¶å¼•ç”¨æ‹“æ‰‘ä¸Šä¸‹æ–‡ï¼ˆåˆ¤æ–­å—å½±å“èµ„æºèŒƒå›´ï¼‰ï¼ŒPlanConfirmModal å¯æ˜¾ç¤ºæ‹“æ‰‘å¿«ç…§ã€‚

- **é˜¶æ®µæˆæœ**ï¼šKubeCopilot æ‹¥æœ‰å¤šæ­¥ AI åä½œèƒ½åŠ›ä¸åŸºç¡€å¯è§‚æµ‹æ€§ï¼Œæ¨¡å—è¾¹ç•Œå¾—åˆ°éªŒè¯ï¼Œå¯é€æ­¥å‘çœŸæ­£çš„å¤šæœåŠ¡æ¶æ„æ¼”è¿›ã€‚
- **é€€å‡ºæ ‡å‡†**:
  - YAML Copilot å¯ç”Ÿæˆå¤šæ­¥éª¤ OperationPlanï¼Œå¹¶æ­£ç¡®å±•ç¤º/æ‰§è¡Œ `steps[]` ä¸å›æ»šç­–ç•¥ã€‚
  - Prometheus æŒ‡æ ‡é›†æˆåœ¨ Pod/Node è¯¦æƒ…é¡µå±•ç¤ºï¼ŒåŒæ—¶æ³¨å…¥ AI è¯Šæ–­ä¸Šä¸‹æ–‡ã€‚
  - `services/ai-orchestrator` æˆ– `services/core-api` è‡³å°‘æœ‰ä¸€ä¸ªä»¥ç‹¬ç«‹è¿›ç¨‹/å‡½æ•°å½¢æ€è¿è¡Œçš„ PoCï¼Œé€šè¿‡åŒä¸€ domain åŒ…ç¼–è¯‘ã€‚
  - æ‹“æ‰‘å›¾å¯äº¤äº’æŸ¥çœ‹èµ„æºå…³ç³»ï¼ŒPlanConfirmModal èƒ½å…³è”æ˜¾ç¤ºå½±å“èŒƒå›´ã€‚

---

## **Phase 4: SRE å·¥å…·åŒ– & æ¸è¿›è‡ªåŠ¨åŒ– (SRE Tooling & Progressive Automation)**

*ç›®æ ‡ï¼šå°†å¯é æ€§å·¥ç¨‹å®è·µåµŒå…¥æ—¥å¸¸æ“ä½œï¼Œæ„å»ºæ¸è¿›å¼è‡ªåŠ¨åŒ–é—­ç¯ã€‚*

- [ ]  **UI é©¾é©¶èˆ±åŒ–**  
  - [ ]  æ„å»ºå¯é æ€§ä»ªè¡¨ç›˜ï¼šSLO å¡ç‰‡ã€é”™è¯¯é¢„ç®—ç‡ƒå°½å›¾ã€è®¡åˆ’æ‰§è¡Œè¶‹åŠ¿ã€‚  
  - [ ]  Postmortem Composerï¼šæ‹–æ‹½è¯æ®å—ï¼ˆäº‹ä»¶ã€æ—¥å¿—ã€æ‹“æ‰‘å¿«ç…§ã€æŒ‡æ ‡å›¾ï¼‰ï¼Œä¸€é”®ç”ŸæˆæŠ¥å‘Šã€‚  
  - [ ]  å‘å¸ƒæ§åˆ¶é¢æ¿ï¼šå®æ—¶å±•ç¤ºé‡‘ä¸é›€è¿›åº¦ã€è‡ªåŠ¨å›æ»šçŠ¶æ€ï¼Œæ”¯æŒäººå·¥ä»‹å…¥æŒ‰é’®ã€‚

- [ ]  **SLO / é”™è¯¯é¢„ç®—æ¨¡å—**  
  - [ ]  æ”¯æŒä¸ºå…³é”® Service å®šä¹‰ SLI/SLOï¼Œæ¥å…¥ç°æœ‰ metrics æ•°æ®æºã€‚  
  - [ ]  Risk Engine å¼•å…¥ `sloBudgetImpact`ï¼Œå½“é”™è¯¯é¢„ç®—å‘Šæ€¥è‡ªåŠ¨æå‡é£é™©ç­‰çº§ã€‚  
  - [ ]  UI å±•ç¤ºæ¯ä¸ª Plan å¯¹é”™è¯¯é¢„ç®—çš„æ½œåœ¨å½±å“ã€‚

- [ ]  **AI è¾…åŠ©äº‹åå¤ç›˜**  
  - [ ]  èšåˆ OperationPlanã€äº‹ä»¶ã€æŒ‡æ ‡ç”Ÿæˆ Postmortem è‰ç¨¿ï¼Œé™„å¸¦æ‹“æ‰‘/æŒ‡æ ‡å¿«ç…§ã€‚  
  - [ ]  æ”¯æŒä¸€é”®å¯¼å‡ºï¼Œå¹¶è®°å½•åœ¨å®¡è®¡åº“ä¸­ã€‚

- [ ]  **æ¸è¿›å¼å‘å¸ƒä¸è‡ªåŠ¨å›æ»š**  
  - [ ]  è‡ªç„¶è¯­è¨€ç”Ÿæˆé‡‘ä¸é›€/è“ç»¿ Planï¼Œè‡ªåŠ¨æ’å…¥ç›‘æ§æ­¥éª¤ã€‚  
  - [ ]  æ‰§è¡Œå™¨èƒ½æ ¹æ®å®æ—¶æŒ‡æ ‡è‡ªåŠ¨å†³å®šæ¨è¿›æˆ–å›æ»šï¼Œå¹¶æ›´æ–° Plan çŠ¶æ€ã€‚  
  - [ ]  Prompt Registry ç®¡ç† rollout é˜¶æ®µï¼Œæ”¯æŒç°åº¦è°ƒåº¦ã€‚

- **é˜¶æ®µæˆæœ**ï¼šäº§å“å‡çº§ä¸ºâ€œå¯é æ€§é©¾é©¶èˆ±â€ï¼Œå…·å¤‡æŒ‡æ ‡é©±åŠ¨çš„é£é™©è¯„ä¼°ã€AI è¾…åŠ©å¤ç›˜ã€æ¸è¿›å¼å‘å¸ƒèƒ½åŠ›ï¼Œä¸ºæœ€ç»ˆçš„ä¸»åŠ¨è‡ªåŠ¨åŒ–åšå¥½å‡†å¤‡ã€‚
- **é€€å‡ºæ ‡å‡†**:
  - SLO/SLA é…ç½® UI ä¸åç«¯è½åœ°ï¼ŒRisk Engine èƒ½åŸºäºé”™è¯¯é¢„ç®—è‡ªåŠ¨æå‡é£é™©ã€‚
  - Postmortem Composer æ”¯æŒæ‹–æ‹½è¯æ®ä¸ä¸€é”®ç”ŸæˆæŠ¥å‘Šï¼Œäº§å‡ºç¤ºä¾‹è¢« SRE å›¢é˜Ÿé‡‡ç”¨ã€‚
  - æ¸è¿›å¼å‘å¸ƒæµç¨‹æ”¯æŒè‡ªåŠ¨ç›‘æ§ã€æš‚åœã€å›æ»šï¼Œå¹¶åœ¨ UI ä¸­å®æ—¶æ˜¾ç¤ºçŠ¶æ€ã€‚
  - Telemetry ä¸å®¡è®¡å¯ä»¥å®Œæ•´å¤ç›˜ä¸€æ¬¡è®¡åˆ’çš„ç”Ÿæˆã€å®¡æ‰¹ã€æ‰§è¡Œä¸åç»­å½±å“ã€‚

---

## **Phase 5 & Beyond: ä¸»åŠ¨æ™ºèƒ½ä¸ç”Ÿæ€æ‰©å±• (Proactive Intelligence & Ecosystem)**

*ç›®æ ‡ï¼šæ¢ç´¢ä¸»åŠ¨å¼æ²»ç†ã€ç”Ÿæ€é›†æˆä¸å¤šé›†ç¾¤ç®¡æ§ï¼Œä¸ºå•†ä¸šåŒ–é“ºè·¯ã€‚*

- [ ]  **ä¸»åŠ¨å¼‚å¸¸æ£€æµ‹ Agent**ï¼šå®šæ—¶å·¡æ£€å…³é”®èµ„æºï¼Œç”Ÿæˆ `status: pending` çš„ OperationPlanï¼Œæ¨é€ç»™ SRE å®¡æ ¸ã€‚  
- [ ]  **Admission Webhook PoC**ï¼šå°†é£é™©è§„åˆ™å‰ç½®è‡³é›†ç¾¤å‡†å…¥å±‚ï¼Œé˜»æ­¢æœªæˆæƒå˜æ›´ã€‚  
- [ ]  **æ’ä»¶ç”Ÿæ€**ï¼šå¼€æ”¾ API ä¸æ’ä»¶æœºåˆ¶ï¼Œæ¥å…¥ CloudWatch/GitOps/æœåŠ¡å°ç³»ç»Ÿã€‚  
- [ ]  **å¤šé›†ç¾¤ä¸å•†ä¸šåŒ–**ï¼šæä¾› Helm Chart/å®¹å™¨åŒ–éƒ¨ç½²ã€é›†ç¾¤ä¸Šä¸‹æ–‡åˆ‡æ¢ã€å›¢é˜Ÿæƒé™ç®¡ç†ï¼›æ¢ç´¢ä¼ä¸šç‰ˆå¢å€¼åŠŸèƒ½ã€‚
  - UI æ„¿æ™¯ï¼šæ”¯æŒå¤šè§’è‰²ä¸»é¢˜ï¼ˆSRE/å¹³å°å·¥ç¨‹å¸ˆï¼‰ã€é›†ç¾¤ä¸Šä¸‹æ–‡åˆ‡æ¢å™¨ã€å¯æ’æ‹”ä»ªè¡¨ç»„ä»¶ï¼Œè®©å›¢é˜Ÿåœ¨ä¸ fork æ ¸å¿ƒ UI çš„å‰æä¸‹æ‰©å±•é©¾é©¶èˆ±ã€‚  

## **é™„å½• Aï¼šæœ¯è¯­è¡¨ (Glossary)**

| æœ¯è¯­ | å®šä¹‰ | å…³è”ç« èŠ‚ |
| --- | --- | --- |
| OperationPlan | æè¿°ä¸€æ¬¡å†™æ“ä½œçš„ç»“æ„åŒ–è®¡åˆ’ï¼ŒåŒ…å« diffã€é£é™©ã€å®¡è®¡ä¿¡æ¯ | ç¬¬ 8 èŠ‚ |
| PlanConfirmModal | å‘ˆç° OperationPlan çš„ä¸‰å±‚å¯è§†åŒ–ç¡®è®¤ UIï¼Œæ”¯æŒäººå·¥æ‰¹å‡† | ç¬¬ 10 èŠ‚ Phase 2 |
| Prompt Registry | ç®¡ç† Prompt æ¨¡æ¿ã€ç‰ˆæœ¬ã€ç°åº¦ä¸é£é™©ä¿¡æ¯çš„æ¸…å• | ç¬¬ 9 èŠ‚ |
| Prompt Pipeline | AI è¯·æ±‚ç»Ÿä¸€ç»è¿‡çš„äº”æ­¥æµç¨‹ï¼šcontext â†’ template â†’ LLM â†’ schema â†’ risk | ç¬¬ 9 èŠ‚ |
| Risk Engine / RiskAnnotator | æ ¹æ®è§„åˆ™ã€SLO å’Œ Prompt å…ƒæ•°æ®ä¸º OperationPlan èµ‹äºˆé£é™©ç­‰çº§ | ç¬¬ 8ã€9 èŠ‚ |
| Secure Proxy | è´Ÿè´£æŒæœ‰é›†ç¾¤å‡­è¯ã€ç»Ÿä¸€è®¿é—® Kubernetes API çš„åç«¯ç»„ä»¶ | ç¬¬ 7 èŠ‚ |
| Domain Packages | `packages/domain-*` ä¸­çš„é¢†åŸŸé€»è¾‘åŒ…ï¼Œä¾› apps/services å…±äº« | ç¬¬ 6 èŠ‚ |

## **é™„å½• Bï¼šå¸¸è§é—®é¢˜ (FAQ)**

**Q1ï¼šä¸ºä»€ä¹ˆå†™æ“ä½œå¿…é¡»ç»è¿‡ OperationPlanï¼Ÿ**  
Aï¼šå®ƒæä¾›å¯å®¡è®¡ã€å¯å›æ»šçš„å¥‘çº¦ï¼Œèƒ½åœ¨æ‰§è¡Œå‰æ ¡éªŒèµ„æºç‰ˆæœ¬å¹¶å‘ˆç°é£é™©ã€‚å¦‚æœä¸ç»è¿‡ Planï¼ŒAI å†™æ“ä½œä¼šç¼ºä¹è¿½è¸ªä¸å®‰å…¨ä¿è¯ã€‚

**Q2ï¼šPrompt Registry æ›´æ–°æµç¨‹å¤æ‚å—ï¼Ÿ**  
Aï¼šæ›´æ–°éœ€é€šè¿‡ PR + CI æ ¡éªŒ + æŒ‡å®šå®¡æ ¸äººæ£€æŸ¥ï¼ŒéšåæŒ‰ `rollout` ç°åº¦å‘å¸ƒã€‚è¿™æ ·å¯ä»¥é¿å…é«˜é£é™© Prompt ç›´æ¥å½±å“ç”Ÿäº§ã€‚

**Q3ï¼šå¦‚æœ LLM è¾“å‡ºä¸ç¬¦åˆ Schema æ€ä¹ˆåŠï¼Ÿ**  
Aï¼šZod æ ¡éªŒå¤±è´¥æ—¶è§¦å‘ fallbackï¼šé‡è¯•ã€æ›¿æ¢ä¸ºä¿å®ˆ Promptï¼Œæˆ–å°†è¯·æ±‚æ ‡è®°ä¸ºäººå·¥å¤„ç†ï¼Œç¡®ä¿ä¸æ‰§è¡Œä¸ç¡®å®šçš„è®¡åˆ’ã€‚

**Q4ï¼šæœªæ¥æ‹†åˆ†å¾®æœåŠ¡ä¼šå¾ˆéš¾å—ï¼Ÿ**  
Aï¼šPhase 2 å®ŒæˆåŒ…åŒ–ä¸ `services/*` stub åï¼Œå‰ç«¯ä¸åç«¯é€šè¿‡æ˜ç¡® API åˆåŒäº¤äº’ï¼Œè¿ç§»æ—¶åªéœ€æ›¿æ¢éƒ¨ç½²ç›®æ ‡ï¼Œæ— éœ€é‡å†™é¢†åŸŸä»£ç ã€‚

**Q5ï¼šå¦‚ä½•å¿«é€Ÿåœ¨ UI ä¸­éªŒè¯æ–°ç‰¹æ€§ï¼Ÿ**  
Aï¼šä½¿ç”¨å‘½ä»¤é¢æ¿+PlanConfirmModal çš„ç»„åˆï¼›è‹¥æ˜¯å¯è§†åŒ–å¢å¼ºï¼Œéµå¾ª UI è¿­ä»£ç­–ç•¥ï¼Œä»…æ›¿æ¢è§†å›¾å±‚å¹¶å¤ç”¨ hooks/stateã€‚

---
    æ ¸å¿ƒç‰¹æ€§:
        å®‰å…¨å‡­è¯å­˜å‚¨: å…è®¸ç”¨æˆ·è¿æ¥å¹¶å®‰å…¨åœ°å­˜å‚¨å¤šä¸ªé›†ç¾¤çš„å‡­è¯ã€‚Kubeconfig å°†è¢«åŠ å¯†åå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶ä¸ç”¨æˆ·è´¦æˆ·å…³è”ã€‚
        è¿æ¥å‘½å: ç”¨æˆ·å¯ä»¥ä¸ºæ¯ä¸ªè¿æ¥æŒ‡å®šä¸€ä¸ªæ˜“äºè¯†åˆ«çš„åç§°ï¼ˆä¾‹å¦‚ï¼Œprod-us-east-1, staging-eu-west, dev-clusterï¼‰ã€‚
        å¿«é€Ÿä¸Šä¸‹æ–‡åˆ‡æ¢: åœ¨ UI é¡¶éƒ¨ Header ä¸­å®ç°ä¸€ä¸ªå…¨å±€çš„é›†ç¾¤åˆ‡æ¢ä¸‹æ‹‰èœå•ï¼Œå…è®¸ç”¨æˆ·ä¸€é”®åˆ‡æ¢å½“å‰æ“ä½œçš„é›†ç¾¤ä¸Šä¸‹æ–‡ï¼Œæ— éœ€é‡æ–°ç™»å½•æˆ–ç²˜è´´ Kubeconfigã€‚
    [è¿œæœŸ] è·¨é›†ç¾¤æ¦‚è§ˆ: åœ¨ä¸»ä»ªè¡¨ç›˜é¡µé¢æä¾›ä¸€ä¸ªâ€œèˆ°é˜Ÿæ¦‚è§ˆâ€è§†å›¾ï¼Œé›†ä¸­å±•ç¤ºæ‰€æœ‰å·²è¿æ¥é›†ç¾¤çš„å…³é”®å¥åº·çŠ¶æ€æŒ‡æ ‡ã€‚
        æˆ˜ç•¥ä»·å€¼: è¿™æ˜¯ KubeCopilot å®ç°å•†ä¸šåŒ–å’Œè¢«å¤§å‹å›¢é˜Ÿé‡‡çº³çš„å…³é”®ä¸€æ­¥ã€‚å®ƒæå¤§åœ°æ‰©å±•äº†äº§å“çš„ç›®æ ‡ç”¨æˆ·èŒƒå›´ï¼Œä»ä¸ªäººå¼€å‘è€…å»¶ä¼¸åˆ°ç®¡ç†å¤æ‚åŸºç¡€è®¾æ–½çš„æ•´ä¸ªå›¢é˜Ÿï¼Œæ˜¯å®ç°â€œæ™ºèƒ½é©¾é©¶èˆ±â€å®å¤§æ„¿æ™¯çš„å¿…è¦åŸºç¡€ã€‚
- [ä¼ä¸šçº§ç‰¹æ€§] **æ•æ„Ÿæ•°æ®è„±æ•ç½‘å…³ (Sensitive Data Sanitization Gateway)**
    æ„¿æ™¯: ä¸ºç¡®ä¿ KubeCopilot åœ¨å¤„ç†åŒ…å«ä¸¥æ ¼æ•°æ®éšç§å’Œåˆè§„æ€§è¦æ±‚çš„ç”Ÿäº§ç¯å¢ƒä¸­æ˜¯å®‰å…¨çš„ï¼Œæˆ‘ä»¬å°†å¼•å…¥ä¸€ä¸ª AI ä¸Šä¸‹æ–‡çš„è„±æ•å±‚ã€‚
    å®ç°:
        åœ¨ AI ç¼–æ’å™¨ (/lib/ai/) ä¸­åˆ›å»ºä¸€ä¸ª Sanitizer æ¨¡å—ã€‚
        åœ¨ä»»ä½•åŒ…å«è‡ªç”±æ–‡æœ¬ï¼ˆå°¤å…¶æ˜¯ Pod æ—¥å¿—ï¼‰çš„ä¸Šä¸‹æ–‡è¢«å‘é€ç»™ç¬¬ä¸‰æ–¹ LLM Provider ä¹‹å‰ï¼Œéƒ½ä¼šå¼ºåˆ¶é€šè¿‡æ­¤æ¨¡å—è¿›è¡Œå¤„ç†ã€‚
        è¯¥æ¨¡å—å°†é‡‡ç”¨å¯é…ç½®çš„ã€åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™é›†ï¼Œè‡ªåŠ¨è¯†åˆ«å¹¶å±è”½æˆ–æ›¿æ¢æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š
        IP åœ°å€ (v4/v6) -> [REDACTED_IP]
        ç”µå­é‚®ä»¶åœ°å€ -> [REDACTED_EMAIL]
        UUIDs / Hashes -> [REDACTED_ID]
        å¸¸è§çš„ API Key æˆ– Token æ ¼å¼ -> [REDACTED_SECRET]
    ç”¨æˆ·é€æ˜åº¦: UI å°†æ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·ï¼Œç”¨äº AI åˆ†æçš„æ•°æ®ä¼šç»è¿‡è„±æ•å¤„ç†ã€‚
    æˆ˜ç•¥ä»·å€¼: æ­¤åŠŸèƒ½æ˜¯ KubeCopilot ä»ä¸€ä¸ªå¼€å‘è€…å·¥å…·æ¼”å˜ä¸ºä¸€ä¸ªå¯è¢«ä¼ä¸šä¿¡èµ–çš„ SRE å¹³å°çš„æ ¸å¿ƒå®‰å…¨ä¿éšœï¼Œæ˜¯æ„å»ºâ€œå®‰å…¨é»˜è®¤â€è®¾è®¡å“²å­¦çš„å…³é”®å®è·µã€‚
---

<aside>
ğŸ’¡

### **KubeCopilot - é¡¹ç›®é©±åŠ¨çš„å­¦ä¹ è·¯å¾„ (Project-Driven Learning Path)**

**æ ¸å¿ƒç†å¿µ**: KubeCopilot é¡¹ç›®çš„æ¯ä¸€é˜¶æ®µï¼Œéƒ½å¯¹åº”CKA å’Œäº‘å‚å•†è®¤è¯æ‰€éœ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚å°†é€šè¿‡**ä¸ºé¡¹ç›®è´¡çŒ®ä»£ç **æ¥å®Œæˆ**è®¤è¯è€ƒè¯•çš„å®éªŒé¢˜**ã€‚

è¿™ä¸ªé˜¶æ®µï¼Œç›®æ ‡æ˜¯æ‹¿ä¸‹ CKAï¼Œå¹¶å®Œæˆé¡¹ç›®çš„åŸºç¡€æ¶æ„å’Œæ ¸å¿ƒè¯»å†™åŠŸèƒ½ã€‚ä¸¤è€…å®Œç¾äº’è¡¥ã€‚

| **CKA çŸ¥è¯†é¢†åŸŸ** | **KubeCopilot å®è·µä»»åŠ¡ (æ‚¨éœ€è¦åŠ¨æ‰‹ç¼–ç å®ç°)** | **æ‚¨å°†å­¦åˆ°ä»€ä¹ˆï¼Ÿ** |
| --- | --- | --- |
| **é›†ç¾¤æ¶æ„ã€API ä¸å¯¹è±¡** | **Phase 1: æ ¸å¿ƒèµ„æºæµè§ˆ**ã€‚ä½¿ç”¨Â @kubernetes/client-nodeÂ ç¼–å†™åç«¯ APIï¼Œå®ç°å¯¹ Pods, Deployments, Services çš„Â listÂ å’ŒÂ getÂ æ“ä½œã€‚ | æ·±åˆ»ç†è§£ K8s çš„æ ¸å¿ƒèµ„æºå¯¹è±¡ï¼ˆYAML ç»“æ„ã€specÂ ä¸Â statusï¼‰ï¼Œç†Ÿæ‚‰ REST API è·¯å¾„ï¼ŒæŒæ¡å¦‚ä½•é€šè¿‡å®¢æˆ·ç«¯ä¸ API Server äº¤äº’ã€‚ |
| **å·¥ä½œè´Ÿè½½ä¸è°ƒåº¦** | **Phase 2: å®ç° Deployments çš„â€œé‡å¯â€å’Œâ€œä¼¸ç¼©â€åŠŸèƒ½**ã€‚æ‚¨éœ€è¦è°ƒç”¨ K8s API æ¥Â patchÂ ä¸€ä¸ª Deployment å¯¹è±¡ï¼Œä¿®æ”¹Â replicasÂ æˆ–æ·»åŠ  annotation è§¦å‘æ»šåŠ¨æ›´æ–°ã€‚ | ç†è§£ Deploymentã€ReplicaSetã€Pod ä¹‹é—´çš„çˆ¶å­å…³ç³»å’Œæ§åˆ¶å¾ªç¯ã€‚è¿™æ˜¯ CKA çš„æ ¸å¿ƒè€ƒç‚¹ã€‚ |
| **æœåŠ¡ä¸ç½‘ç»œ** | **Phase 1: Services & Ingresses åˆ—è¡¨/è¯¦æƒ…é¡µ**ã€‚æ‚¨éœ€è¦è§£æ Service çš„Â ClusterIP,Â Ports,Â EndpointsÂ ä»¥åŠ Ingress çš„Â rulesÂ å’ŒÂ backendã€‚ | æŒæ¡ K8s çš„æœåŠ¡å‘ç°å’Œæµé‡å…¥å£æœºåˆ¶ï¼Œç†è§£ä¸åŒ Service Type çš„åŒºåˆ«ã€‚ |
| **æ•…éšœæ’æŸ¥ (Troubleshooting)** | **Phase 1: AI è¯Šæ–­åŠŸèƒ½**ã€‚æ‚¨éœ€è¦ç¼–å†™ä»£ç å»**ä¸»åŠ¨è·å–**Â Pod çš„Â describeÂ ä¿¡æ¯ã€eventsÂ å’ŒÂ logsã€‚è¿™æ˜¯ CKA æ•…éšœæ’æŸ¥é¢˜çš„**ä»£ç åŒ–å®ç°**ã€‚ | ç†Ÿç»ƒæŒæ¡æ’æŸ¥ Pod å¼‚å¸¸ï¼ˆå¦‚Â CrashLoopBackOffï¼‰çš„æ ¸å¿ƒå‘½ä»¤å’Œæ€è·¯ï¼Œå› ä¸ºæ‚¨æ­£åœ¨æŠŠè¿™ä¸ªæ€è·¯æ•™ç»™ AIã€‚ |
| **å®‰å…¨ (Security)** | **Phase 1/2: Kubeconfig çš„å®‰å…¨å¤„ç†**ã€‚æ‚¨éœ€è¦è®¾è®¡åç«¯ä¼šè¯ç®¡ç†ï¼Œç¡®ä¿ KubeconfigÂ **ç»ä¸**æ³„éœ²åˆ°å‰ç«¯ï¼Œå¹¶æ€è€ƒæœ€å°æƒé™åŸåˆ™ã€‚ | ç†è§£ Kubeconfig çš„ç»“æ„ã€ä¸Šä¸‹æ–‡å’Œç”¨æˆ·èº«ä»½éªŒè¯ã€‚è¿™æ˜¯ K8s å®‰å…¨çš„åŸºç¡€ã€‚ |

**å­¦ä¹ å»ºè®®**: åœ¨å¼€å‘æ¯ä¸ªåŠŸèƒ½å‰ï¼Œå…ˆå» KodeKloud æˆ–å®˜æ–¹æ–‡æ¡£å­¦ä¹ å¯¹åº”çš„ç†è®ºçŸ¥è¯†ï¼Œç„¶åç«‹å³åœ¨ KubeCopilot é¡¹ç›®ä¸­ç”¨ä»£ç å®ç°å®ƒã€‚**é¡¹ç›®å°±æ˜¯æœ€å¥½çš„å®éªŒç¯å¢ƒ**ã€‚

å½“æ‚¨å¯¹ K8s æœ¬èº«æœ‰äº†æ·±å…¥ç†è§£åï¼Œä¸‹ä¸€æ­¥æ˜¯å­¦ä¹ å¦‚ä½•åœ¨ä¸»æµäº‘å¹³å°ä¸Šè¿ç»´å®ƒã€‚

| **äº‘å¹³å° DevOps çŸ¥è¯†é¢†åŸŸ** | **KubeCopilot å®è·µä»»åŠ¡** | **æ‚¨å°†å­¦åˆ°ä»€ä¹ˆï¼Ÿ** |
| --- | --- | --- |
| **æ‰˜ç®¡ K8s æœåŠ¡ (GKE/EKS)** | **ä¸º KubeCopilot æ·»åŠ äº‘å‚å•† K8s çš„è¿æ¥èƒ½åŠ›**ã€‚é™¤äº† Kubeconfigï¼Œå®ç°é€šè¿‡Â **GCP Service Account**Â æˆ–Â **AWS IAM Role**Â è¿›è¡Œè®¤è¯ã€‚ | è¿™æ˜¯äº‘å¹³å°è®¤è¯çš„æ ¸å¿ƒã€‚æ‚¨å°†äº²æ‰‹å®è·µå¦‚ä½•é…ç½® IAM æƒé™ï¼Œç†è§£äº‘ä¸Š K8s çš„è®¤è¯æˆæƒä½“ç³»ï¼Œè¿™è¿œæ¯”åªçœ‹æ–‡æ¡£æ·±åˆ»ã€‚ |
| **äº‘ç›‘æ§ä¸æ—¥å¿— (Cloud Monitoring/CloudWatch)** | **Phase 4: å®ç°æ’ä»¶åŒ–çš„ç›‘æ§é€‚é…å™¨**ã€‚ç¼–å†™ä¸€ä¸ªÂ CloudWatchAdapterÂ æˆ–Â GoogleCloudMonitoringAdapterï¼Œè®©æˆ‘ä»¬çš„ AI è¯Šæ–­åŠŸèƒ½å¯ä»¥ä»äº‘å‚å•†çš„ç›‘æ§ç³»ç»Ÿä¸­æ‹‰å–æŒ‡æ ‡ã€‚ | ç†Ÿæ‚‰äº‘å‚å•†çš„ç›‘æ§ APIã€æŒ‡æ ‡æ ¼å¼å’ŒæŸ¥è¯¢è¯­è¨€ (PromQL vs MQL/CloudWatch Insights)ï¼Œè¿™æ˜¯ DevOps å·¥ç¨‹å¸ˆçš„æ—¥å¸¸å·¥ä½œã€‚ |
| **CI/CD** | **ä¸º KubeCopilot é¡¹ç›®æœ¬èº«æ­å»º CI/CD æµæ°´çº¿**ã€‚ä½¿ç”¨Â **GitHub Actions**Â é…åˆÂ **Google Cloud Build**Â æˆ–Â **AWS CodePipeline**ï¼Œå®ç° PR è‡ªåŠ¨ lintã€æµ‹è¯•ã€æ„å»º Docker é•œåƒå¹¶æ¨é€åˆ°äº‘å‚å•†çš„é•œåƒä»“åº“ (GCR/ECR)ã€‚ | äº²æ‰‹æ­å»ºä¸€ä¸ªå®Œæ•´çš„äº‘åŸç”Ÿ CI/CD æµç¨‹ï¼Œè¿™æ˜¯ DevOps Professional è®¤è¯çš„å¿…è€ƒå†…å®¹ã€‚ |
| **èº«ä»½ä¸è®¿é—®ç®¡ç† (IAM)** | **ä¸º KubeCopilot çš„é«˜çº§åŠŸèƒ½è®¾è®¡äº‘å¹³å°æƒé™**ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ KubeCopilot éœ€è¦æ“ä½œèŠ‚ç‚¹æ± ï¼Œå®ƒéœ€è¦çš„ IAM Role æ˜¯ä»€ä¹ˆï¼Ÿæ‚¨éœ€è¦åœ¨äº‘å¹³å°ä¸Šåˆ›å»ºå¹¶æµ‹è¯•è¿™ä¸ª Roleã€‚ | æ·±å…¥ç†è§£â€œæœ€å°æƒé™åŸåˆ™â€åœ¨äº‘ç¯å¢ƒä¸­çš„åº”ç”¨ï¼Œå­¦ä¼šå¦‚ä½•ä¸ºåº”ç”¨å’ŒæœåŠ¡å®‰å…¨åœ°åˆ†é…æƒé™ã€‚ |

æ‚¨ä¸å¿…ç­‰åˆ°æ‹¿ä¸‹ ML è®¤è¯æ‰å¼€å§‹å­¦ä¹ ã€‚**æ‚¨åœ¨å¼€å‘ KubeCopilot çš„ AI åŠŸèƒ½æ—¶ï¼Œå°±å·²ç»åœ¨å®è·µ MLOps çš„æ ¸å¿ƒæ€æƒ³äº†**ã€‚

| **MLOps çŸ¥è¯†é¢†åŸŸ** | **KubeCopilot å®è·µä»»åŠ¡** | **æ‚¨å°†å­¦åˆ°ä»€ä¹ˆï¼Ÿ** |
| --- | --- | --- |
| **æ¨¡å‹éƒ¨ç½²ä¸æœåŠ¡** | **è®¾è®¡å’Œç»´æŠ¤ AI ç¼–æ’å™¨ (/api/ai/*)**ã€‚æ‚¨éœ€è¦è°ƒç”¨ OpenAI/Gemini çš„ APIï¼Œè¿™æœ¬èº«å°±æ˜¯åœ¨ä½¿ç”¨ä¸€ä¸ªâ€œæ¨¡å‹å³æœåŠ¡ (Model-as-a-Service)â€ã€‚ | äº†è§£å¦‚ä½•å¤„ç† API keyã€ç®¡ç†è¯·æ±‚è¶…æ—¶å’Œé‡è¯•ã€å¤„ç† API çš„ Rate Limitã€‚ |
| **Prompt å·¥ç¨‹ä¸ç‰ˆæœ¬æ§åˆ¶** | **ç®¡ç†é¡¹ç›®ä¸­çš„ Prompt Template**ã€‚å½“æ‚¨ä¼˜åŒ–ä¸€ä¸ª Prompt ä»¥è·å¾—æ›´å¥½çš„ JSON è¾“å‡ºæ—¶ï¼Œæ‚¨å°±æ˜¯åœ¨è¿›è¡Œ Prompt å·¥ç¨‹ã€‚æ‚¨åº”è¯¥å°†è¿™äº› Prompt åƒä»£ç ä¸€æ ·çº³å…¥ Git è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚ | è¿™æ˜¯ MLOps ä¸­â€œæ•°æ®/æ¨¡å‹ç‰ˆæœ¬æ§åˆ¶â€æ€æƒ³åœ¨ LLM é¢†åŸŸçš„åº”ç”¨ã€‚ |
| **è¾“å‡ºæ ¡éªŒä¸ç”Ÿäº§ç›‘æ§** | **å¼ºåˆ¶ä½¿ç”¨ Zod å¯¹ LLM è¾“å‡ºè¿›è¡Œ Schema æ ¡éªŒ**ã€‚è®¾è®¡ Fallback æœºåˆ¶ï¼Œåœ¨ LLM è¾“å‡ºä¸åˆè§„æ—¶è½¬å…¥äººå·¥å¤„ç†ã€‚ | å®è·µ MLOps ä¸­æœ€é‡è¦çš„â€œæ¨¡å‹è¾“å‡ºè´¨é‡ç›‘æ§â€ï¼Œç¡®ä¿ AI çš„ä¸ç¡®å®šæ€§ä¸ä¼šç ´åç”Ÿäº§ç³»ç»Ÿã€‚ |

</aside>
